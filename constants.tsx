import React from 'react';
import type { Subject, PremadeGame } from './types';

export const SUBJECTS: Subject[] = [
  {
    nameKey: "subject_french",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/></svg>,
    color: "text-blue-500 dark:text-blue-300",
    bgColor: "bg-blue-500/20",
  },
  {
    nameKey: "subject_maths",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="16" y1="14" x2="16" y2="18"></line><line x1="12" y1="10" x2="12" y2="18"></line><line x1="8" y1="10" x2="8" y2="18"></line><line x1="8" y1="14" x2="12" y2="14"></line></svg>,
    color: "text-red-500 dark:text-red-300",
    bgColor: "bg-red-500/20",
  },
  {
    nameKey: "subject_history",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>,
    color: "text-yellow-500 dark:text-yellow-300",
    bgColor: "bg-yellow-500/20",
  },
   {
    nameKey: "subject_english",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg>,
    color: "text-purple-500 dark:text-purple-300",
    bgColor: "bg-purple-500/20",
  },
  {
    nameKey: "subject_spanish",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="5" r="1"/><path d="M12 8v5"/><path d="M15.5 11.5L18 13l-3.5 1.5"/><path d="M8.5 11.5L6 13l3.5 1.5"/><path d="M12 13v5l-3 3"/><path d="M15 21l-3-3"/></svg>,
    color: "text-orange-500 dark:text-orange-300",
    bgColor: "bg-orange-500/20",
  },
   {
    nameKey: "subject_german",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15.2 6.2C13.8 5.5 12 6.5 12 8s0 3 2 3c2.7 0 4.8-2.2 4.8-5 .1-1.3-1-3-3.8-3"/><path d="M8.8 17.8c1.4.7 3.2-.3 3.2-2s0-3-2-3c-2.7 0-4.8 2.2-4.8 5C5.2 20.3 7 22 9.8 21"/><path d="M12 8s0 3-2 3c-2.8 0-5-2.2-5-5s2.2-5 5-5c1.4 0 2.5.6 3.2 1.2"/><path d="M12 16s0-3 2-3c2.8 0 5 2.2 5 5s-2.2 5-5 5c-1.4 0-2.5-.6-3.2-1.2"/></svg>,
    color: "text-amber-500 dark:text-amber-300",
    bgColor: "bg-amber-500/20",
  },
  {
    nameKey: "subject_svt",
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="9" r="5" />
        <path d="M12 14v8" />
        <path d="M9 19h6" />
        <path d="M15.5 5.5L20 1" />
        <path d="M20 5V1h-4" />
      </svg>
    ),
    color: "text-green-500 dark:text-green-300",
    bgColor: "bg-green-500/20",
  },
  {
    nameKey: "subject_physics",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"/><path d="M6 14h12"/></svg>,
    color: "text-teal-500 dark:text-teal-300",
    bgColor: "bg-teal-500/20",
  },
  {
    nameKey: "subject_technology",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>,
    color: "text-slate-500 dark:text-slate-300",
    bgColor: "bg-slate-500/20",
  },
   {
    nameKey: "subject_arts",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><path d="M7 7c2-2 5-2 7 0M7 17c2 2 5 2 7 0"/></svg>,
    color: "text-pink-500 dark:text-pink-300",
    bgColor: "bg-pink-500/20",
  },
  {
    nameKey: "subject_music",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>,
    color: "text-indigo-500 dark:text-indigo-300",
    bgColor: "bg-indigo-500/20",
  },
  {
    nameKey: "subject_games",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="6" y1="11" x2="10" y2="11"/><line x1="8" y1="9" x2="8" y2="13"/><line x1="15" y1="12" x2="15.01" y2="12"/><line x1="18" y1="10" x2="18.01" y2="10"/><path d="M17.32 5H6.68a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h10.64a4 4 0 0 0 4-4v-6a4 4 0 0 0-4-4z"/></svg>,
    color: "text-lime-500 dark:text-lime-300",
    bgColor: "bg-lime-500/20",
  }
];

const GAME_STYLES = `
    <style>
      body { font-family: 'Poppins', sans-serif; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: transparent; color: #1e293b; text-align: center; }
      .dark body { color: #f1f5f9; }
      .container { width: 95%; max-width: 800px; padding: clamp(15px, 4vw, 30px); background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
      .dark .container { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
      h1 { font-size: clamp(1.5rem, 5vw, 2.2rem); font-weight: 800; margin-top: 0; margin-bottom: 15px; color: #4f46e5; }
      .dark h1 { color: #818cf8; }
      p { color: #475569; margin-bottom: 20px; font-size: clamp(0.9rem, 2.5vw, 1.1rem); }
      .dark p { color: #94a3b8; }
      button { font-size: clamp(0.9rem, 2.5vw, 1.1rem); padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer; background: #4f46e5; color: white; font-weight: 600; transition: all 0.2s ease; will-change: transform; }
      .dark button { background: #6366f1; }
      button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4); }
      .dark button:hover:not(:disabled) { box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4); }
      button:disabled { background: #a5b4fc; cursor: not-allowed; }
      .dark button:disabled { background: #4338ca; }
      input { font-family: 'Poppins', sans-serif; font-size: clamp(1rem, 3vw, 1.2rem); padding: 10px; border: 2px solid #e2e8f0; border-radius: 12px; text-align: center; transition: border-color 0.2s; background: #f8fafc; color: #1e293b; }
      .dark input { background: #1e293b; border-color: #334155; color: #f1f5f9; }
      input:focus { outline: none; border-color: #4f46e5; }
      .dark input:focus { border-color: #818cf8; }
      .feedback { font-weight: bold; margin-top: 15px; height: 24px; transition: opacity 0.3s; font-size: 1.1em; }
      .feedback.correct { color: #16a34a; }
      .dark .feedback.correct { color: #4ade80; }
      .feedback.incorrect { color: #dc2626; }
      .dark .feedback.incorrect { color: #f87171; }
      .start-screen, .end-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(240, 242, 245, 0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; padding: 20px; box-sizing: border-box; }
      .dark .start-screen, .dark .end-screen { background: rgba(2, 6, 23, 0.95); }
      .end-screen h2 { font-size: 2.5em; margin-bottom: 10px;}
      .end-screen p { font-size: 1.5em; margin-bottom: 20px;}
      .hidden { display: none; }
    </style>
`;

export const PREMADE_GAMES: PremadeGame[] = [
    // --- MATHS (5) ---
    { nameKey: "game_maths_speedster_name", descriptionKey: "game_maths_calc_rush_desc", html: `<!DOCTYPE html><html><head><title>Bolide Mathématique</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>.dark .track{background:#334155;border-color:#475569}.dark .lane-markings{background:repeating-linear-gradient(90deg,transparent,transparent 15px,#64748b 15px,#64748b 30px)}.dark #problem{color:#f1f5f9}.track{position:relative;height:120px;background:#e2e8f0;border-radius:10px;margin:20px 0;overflow:hidden;border:2px solid #cbd5e1}.lane-markings{position:absolute;width:200%;height:100%;top:50%;transform:translateY(-50%);background:repeating-linear-gradient(90deg,transparent,transparent 15px,#a0aec0 15px,#a0aec0 30px);animation:move-track 1s linear infinite;}.car{position:absolute;width:60px;height:30px;transition:left .5s ease-in-out}#player-car{bottom:20px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'%3E%3Cpath d='M10 15 L80 15 L90 25 L80 35 L10 35 L0 25 Z' fill='%23ef4444'/%3E%3Cpath d='M20 15 L70 15 L75 5 L25 5 Z' fill='%23f87171'/%3E%3Ccircle cx='25' cy='35' r='5' fill='%231e293b'/%3E%3Ccircle cx='65' cy='35' r='5' fill='%231e293b'/%3E%3C/svg%3E")}#ai-car{top:20px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'%3E%3Cpath d='M10 15 L80 15 L90 25 L80 35 L10 35 L0 25 Z' fill='%2360a5fa'/%3E%3Cpath d='M20 15 L70 15 L75 5 L25 5 Z' fill='%2393c5fd'/%3E%3Ccircle cx='25' cy='35' r='5' fill='%231e293b'/%3E%3Ccircle cx='65' cy='35' r='5' fill='%231e293b'/%3E%3C/svg%3E")}#problem{font-size:2.5em;font-weight:700;margin:20px 0;color:#1e293b}h1{color:#dc2626}.dark h1{color:#f87171}button{background-color:#ef4444}.dark button{background-color:#f87171}@keyframes move-track{from{transform:translateX(0) translateY(-50%)}to{transform:translateX(-30px) translateY(-50%)}}</style></head><body><div class="start-screen"><h1>Bolide Mathématique</h1><p>Répondez correctement pour faire avancer votre voiture et battre l'IA !</p><button id="start-btn">Commencer !</button></div><div class="end-screen hidden"><h2>Fin de la course !</h2><p id="end-message"></p><button id="replay-btn">Rejouer</button></div><div class="container hidden"><h1>Bolide Mathématique</h1><div class="track"><div class="lane-markings"></div><div id="player-car" class="car" style="left:0;"></div><div id="ai-car" class="car" style="left:0;"></div></div><div id="problem"></div><input type="number" id="answer" disabled/></div><script>let score=0,playerPosition=0,aiPosition=0,currentProblem={a:0,b:0,answer:0},aiInterval,gameActive=false;const problemEl=document.getElementById('problem'),answerEl=document.getElementById('answer'),playerCar=document.getElementById('player-car'),aiCar=document.getElementById('ai-car'),startScreen=document.querySelector('.start-screen'),endScreen=document.querySelector('.end-screen'),endMessage=document.getElementById('end-message'),startBtn=document.getElementById('start-btn'),replayBtn=document.getElementById('replay-btn'),gameContainer=document.querySelector('.container');const QUESTIONS_TO_WIN=10;function startGame(){score=0;playerPosition=0;aiPosition=0;playerCar.style.left='0%';aiCar.style.left='0%';startScreen.classList.add('hidden');endScreen.classList.add('hidden');gameContainer.classList.remove('hidden');answerEl.value='';answerEl.disabled=false;answerEl.focus();gameActive=true;newProblem();aiInterval=setInterval(()=>{if(!gameActive)return;aiPosition+=100/QUESTIONS_TO_WIN;aiCar.style.left=aiPosition+'%';if(aiPosition>=100)endGame(false)},2500)}function newProblem(){currentProblem.a=Math.ceil(Math.random()*15)+5;currentProblem.b=Math.ceil(Math.random()*15)+5;currentProblem.answer=currentProblem.a+currentProblem.b;problemEl.textContent=currentProblem.a + ' + ' + currentProblem.b + ' = ?';}answerEl.addEventListener('keyup',function(e){if(e.key==='Enter'&&gameActive)checkAnswer()});function checkAnswer(){const userAnswer=parseInt(answerEl.value);if(!isNaN(userAnswer)&&userAnswer===currentProblem.answer){score++;playerPosition=(score/QUESTIONS_TO_WIN)*100;playerCar.style.left=playerPosition+'%';if(score>=QUESTIONS_TO_WIN)endGame(true)}answerEl.value='';if(gameActive)newProblem()}function endGame(playerWon){gameActive=false;clearInterval(aiInterval);answerEl.disabled=true;gameContainer.classList.add('hidden');endScreen.classList.remove('hidden');endMessage.textContent=playerWon?'Bravo, vous avez gagné !':'L\\'IA a gagné. Essayez encore !';}startBtn.addEventListener('click',startGame);replayBtn.addEventListener('click',startGame);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_grid_flash_name", descriptionKey: "game_maths_tables_desc", html: `<!DOCTYPE html><html><head><title>Grille Multi-Flash</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#dc2626}.dark h1{color:#f87171}button{background-color:#ef4444}.dark button{background-color:#f87171}#grid-container{display:grid;grid-template-columns:repeat(6,1fr);gap:5px;margin:20px 0;}input{width:100%;height:40px;border-color:#fecaca}.dark input{border-color:#991b1b}input:focus{border-color:#ef4444}.dark input:focus{border-color:#f87171}.header{font-weight:bold;display:flex;align-items:center;justify-content:center;height:40px;background:#fee2e2;border-radius:8px;}.dark .header{background:#450a0a;color:#fecaca}#timer,#score{font-size:1.2em;font-weight:bold;margin:10px;color:#991b1b;}.dark #timer,.dark #score{color:#fca5a5}</style></head><body><div class="container"><h1>Grille Multi-Flash</h1><p>Complétez la grille de multiplication le plus vite possible.</p><div id="controls"><button id="start-btn">Démarrer (1 minute)</button></div><div id="stats" class="hidden"><span id="timer">Temps: 60s</span> | <span id="score">Score: 0 / 25</span></div><div id="grid-container"></div></div><script>const gridContainer=document.getElementById('grid-container'),startBtn=document.getElementById('start-btn'),timerEl=document.getElementById('timer'),scoreEl=document.getElementById('score'),statsEl=document.getElementById('stats');let inputs,timerInterval,timeLeft;function setupGrid(){gridContainer.innerHTML='';const numbers=[...Array(5)].map(()=>Math.floor(Math.random()*9)+2);const allHeaders=[...numbers,...numbers].sort(()=>Math.random()-.5);const colHeaders=allHeaders.slice(0,5);const rowHeaders=allHeaders.slice(5,10);gridContainer.appendChild(document.createElement('div'));colHeaders.forEach(h=>{const header=document.createElement('div');header.className='header';header.textContent=h;gridContainer.appendChild(header)});inputs=[];rowHeaders.forEach(r=>{const rowHeader=document.createElement('div');rowHeader.className='header';rowHeader.textContent=r;gridContainer.appendChild(rowHeader);colHeaders.forEach(c=>{const input=document.createElement('input');input.type='number';input.disabled=true;input.dataset.answer=r*c;inputs.push(input);gridContainer.appendChild(input)})})}function startGame(){timeLeft=60;inputs.forEach(i=>{i.disabled=false;i.value='';i.style.borderColor='';i.style.backgroundColor='';});startBtn.classList.add('hidden');statsEl.classList.remove('hidden');updateTimer();updateScore(0);timerInterval=setInterval(()=>{timeLeft--;updateTimer();if(timeLeft<=0)endGame()},1000)}function updateTimer(){timerEl.textContent='Temps: '+timeLeft+'s';}function updateScore(correct){scoreEl.textContent='Score: '+correct+' / 25';}function endGame(){clearInterval(timerInterval);let correct=0;inputs.forEach(input=>{input.disabled=true;const userAnswer=parseInt(input.value);const correctAnswer=parseInt(input.dataset.answer);if(userAnswer===correctAnswer){correct++;input.style.borderColor='#16a34a';input.style.backgroundColor='#dcfce7';}else{input.style.borderColor='#dc2626';input.style.backgroundColor='#fee2e2';if(!input.value)input.value=correctAnswer;}});updateScore(correct);startBtn.textContent='Rejouer';startBtn.classList.remove('hidden');}startBtn.addEventListener('click',()=>{setupGrid();startGame();});setupGrid();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_geo_detective_name", descriptionKey: "game_maths_geometry_desc", html: `<!DOCTYPE html><html><head><title>Géo-Détective</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#d97706}.dark h1{color:#fbbf24}#shape-container{height:150px;margin:20px auto;display:flex;justify-content:center;align-items:center;}#options-container{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:20px;}#options-container button{background:#f59e0b;padding:15px;}.dark #options-container button{background:#d97706}.feedback.correct{color:#65a30d;}.feedback.incorrect{color:#dc2626;}</style></head><body><div class="container"><h1>Géo-Détective</h1><p>Quelle est cette forme ?</p><div id="shape-container"></div><div id="options-container"></div><p id="feedback" class="feedback"></p></div><script>const shapes=[{name:'Carré',draw:ctx=>{ctx.fillRect(25,25,100,100)}},{name:'Cercle',draw:ctx=>{ctx.beginPath();ctx.arc(75,75,50,0,2*Math.PI);ctx.fill()}},{name:'Triangle',draw:ctx=>{ctx.beginPath();ctx.moveTo(75,25);ctx.lineTo(125,125);ctx.lineTo(25,125);ctx.closePath();ctx.fill()}},{name:'Rectangle',draw:ctx=>{ctx.fillRect(25,35,100,80)}},{name:'Ovale',draw:ctx=>{ctx.beginPath();ctx.ellipse(75,75,50,35,0,0,2*Math.PI);ctx.fill()}},{name:'Losange',draw:ctx=>{ctx.beginPath();ctx.moveTo(75,25);ctx.lineTo(125,75);ctx.lineTo(75,125);ctx.lineTo(25,75);ctx.closePath();ctx.fill()}}];let currentShape,buttons;const shapeContainer=document.getElementById('shape-container'),optionsContainer=document.getElementById('options-container'),feedbackEl=document.getElementById('feedback');function nextQuestion(){feedbackEl.textContent='';currentShape=shapes[Math.floor(Math.random()*shapes.length)];const canvas=document.createElement('canvas');canvas.width=150;canvas.height=150;const ctx=canvas.getContext('2d');ctx.fillStyle=document.body.classList.contains('dark')?'#f59e0b':'#ea580c';currentShape.draw(ctx);shapeContainer.innerHTML='';shapeContainer.appendChild(canvas);const options=[currentShape.name,...shapes.filter(s=>s.name!==currentShape.name).sort(()=>.5-Math.random()).slice(0,3).map(s=>s.name)].sort(()=>.5-Math.random());optionsContainer.innerHTML='';buttons=[];options.forEach(opt=>{const button=document.createElement('button');button.textContent=opt;button.onclick=()=>checkAnswer(opt);optionsContainer.appendChild(button);buttons.push(button)})}function checkAnswer(name){buttons.forEach(b=>b.disabled=true);if(name===currentShape.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';}else{feedbackEl.textContent='Faux, c\\'était un ' + currentShape.name + '.';feedbackEl.className='feedback incorrect';}setTimeout(nextQuestion,1500)}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');nextQuestion();</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_equation_mission_name", descriptionKey: "game_maths_equations_desc", html: `<!DOCTYPE html><html><head><title>Mission Équation</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#be185d}.dark h1{color:#f9a8d4}button{background:#db2777}.dark button{background:#e11d48}#equation{font-size:2em;font-weight:bold;margin:20px 0;}.dark #equation{color:#fbcfe8}input{width:80px;border-color:#f9a8d4}.dark input{border-color:#831843}input:focus{border-color:#db2777}.dark input:focus{border-color:#f9a8d4}#timer{font-size:1.5em;font-weight:bold;color:#be185d;margin-bottom:10px;}.dark #timer{color:#f9a8d4}#score{font-size:1.2em;}</style></head><body><div class="container"><h1>Mission Équation</h1><p>Trouvez la valeur de 'x' en 60 secondes !</p><div id="timer">Temps: 60</div><div id="equation"></div><input type="number" id="answer" placeholder="x = ?"><br><button id="check-btn">Valider</button><p id="score">Score: 0</p></div><script>const equations=[{eq:'2x + 4 = 10',sol:3},{eq:'3x - 5 = 7',sol:4},{eq:'x / 2 + 1 = 5',sol:8},{eq:'5x = 25',sol:5},{eq:'15 - 2x = 5',sol:5},{eq:'4x - 3 = 13',sol:4}];let currentEq,score=0,timeLeft=60,timer;const timerEl=document.getElementById('timer'),scoreEl=document.getElementById('score'),answerEl=document.getElementById('answer'),checkBtn=document.getElementById('check-btn');function newEquation(){currentEq=equations[Math.floor(Math.random()*equations.length)];document.getElementById('equation').textContent=currentEq.eq;}function startGame(){score=0;timeLeft=60;scoreEl.textContent='Score: 0';answerEl.value='';newEquation();timerEl.textContent='Temps: 60';answerEl.disabled=false;checkBtn.disabled=false;timer=setInterval(()=>{timeLeft--;timerEl.textContent='Temps: '+timeLeft;if(timeLeft<=0)endGame()},1000);answerEl.focus();}function checkAnswer(){const userAnswer=parseInt(answerEl.value);if(userAnswer===currentEq.sol)score++;scoreEl.textContent='Score: '+score;answerEl.value='';newEquation()}function endGame(){clearInterval(timer);alert('Temps écoulé ! Votre score : '+score);answerEl.disabled=true;checkBtn.disabled=true;}answerEl.addEventListener('keyup',e=>{if(e.key==='Enter')checkAnswer()});checkBtn.addEventListener('click',checkAnswer);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');startGame();</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_fraction_duel_name", descriptionKey: "game_maths_fractions_desc", html: `<!DOCTYPE html><html><head><title>Duel de Fractions</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#dc2626}.dark h1{color:#f87171}#fractions{display:flex;justify-content:center;align-items:center;margin:30px 0;gap:20px;}#fractions button{font-size:2.5em;width:120px;height:120px;border:3px solid #fca5a5;border-radius:12px;background:#fee2e2;}.dark #fractions button{background:#7f1d1d;border-color:#b91c1c;color:#fecaca}.fraction{display:flex;flex-direction:column;font-size:1.8em;font-weight:bold;line-height:1;}.divider{border-bottom:3px solid #b91c1c;width:50px;margin:2px auto;}.dark .divider{border-color:#fca5a5}</style></head><body><div class="container"><h1>Duel de Fractions</h1><p>Cliquez sur la plus grande fraction !</p><div id="fractions"></div><div id="feedback" class="feedback"></div></div><script>let f1,f2,buttons;function newFractions(){const n1=Math.ceil(Math.random()*9),d1=Math.ceil(Math.random()*9)+1,n2=Math.ceil(Math.random()*9),d2=Math.ceil(Math.random()*9)+1;if(n1/d1===n2/d2)return newFractions();f1={n:n1,d:d1,val:n1/d1};f2={n:n2,d:d2,val:n2/d2};const fractionsEl=document.getElementById('fractions');fractionsEl.innerHTML='<button data-val="'+f1.val+'"><div class="fraction"><span>'+f1.n+'</span><div class="divider"></div><span>'+f1.d+'</span></div></button><button data-val="'+f2.val+'"><div class="fraction"><span>'+f2.n+'</span><div class="divider"></div><span>'+f2.d+'</span></div></button>';document.getElementById('feedback').textContent='';buttons=fractionsEl.querySelectorAll('button');buttons.forEach(b=>b.addEventListener('click',check))}function check(e){const chosenVal=parseFloat(e.currentTarget.dataset.val);const correctVal=Math.max(f1.val,f2.val);const feedbackEl=document.getElementById('feedback');if(chosenVal===correctVal){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';}else{feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect';}buttons.forEach(b=>b.disabled=true);setTimeout(newFractions,1000)}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newFractions();</script></body></html>`, subjectNameKey: "subject_maths" },
    // --- FRANCAIS (5) ---
    { nameKey: "game_french_verb_master_name", descriptionKey: "game_french_conjug_desc", html: `<!DOCTYPE html><html><head><title>Le Maître du Verbe</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2563eb}.dark h1{color:#60a5fa}button{background:#3b82f6}.dark button{background:#2563eb}#challenge{font-size:1.5em;margin:20px 0;}.dark #challenge{color:#dbeafe}input{border-color:#bfdbfe}.dark input{border-color:#1e3a8a}input:focus{border-color:#3b82f6}.dark input:focus{border-color:#60a5fa}</style></head><body><div class="container"><h1>Le Maître du Verbe</h1><p>Conjuguez le verbe correctement.</p><div id="challenge"></div><div><input id="response" type="text" autocomplete="off" autocorrect="off"><button id="check-btn">Vérifier</button></div><p id="result" class="feedback"></p></div><script>const verbs=[{v:'chanter',t:'présent',p:'je',r:'chante'},{v:'finir',t:'présent',p:'tu',r:'finis'},{v:'être',t:'futur',p:'il',r:'sera'},{v:'avoir',t:'passé composé',p:'j\\\'',r:'ai eu'},{v:'aller',t:'imparfait',p:'vous',r:'alliez'},{v:'prendre',t:'présent',p:'nous',r:'prenons'}];let current;function newChallenge(){current=verbs[Math.floor(Math.random()*verbs.length)];document.getElementById('challenge').innerText=current.p + ' ('+current.v+') - ' + current.t;document.getElementById('response').value='';document.getElementById('result').innerText='';document.getElementById('response').focus()}function check(){const answer=document.getElementById('response').value.trim().toLowerCase();const resultEl=document.getElementById('result');if(answer===current.r){resultEl.innerText='Correct !';resultEl.className='feedback correct';}else{resultEl.innerText='Faux. La réponse est: '+current.r;resultEl.className='feedback incorrect';}setTimeout(newChallenge,2000);}document.getElementById('response').addEventListener('keyup', e => { if (e.key === 'Enter') check(); });document.getElementById('check-btn').addEventListener('click',check);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newChallenge();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_error_tracker_name", descriptionKey: "game_french_mistake_desc", html: `<!DOCTYPE html><html><head><title>Traqueur d'Erreurs</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2563eb}.dark h1{color:#60a5fa}#sentence span{cursor:pointer;padding:2px 5px;border-radius:5px;transition:background .2s ease-in-out;display:inline-block;margin:2px;}#sentence span:hover{background:#bfdbfe;}.dark #sentence span:hover{background:#1e3a8a;}#sentence{font-size:1.5em;line-height:1.6;}</style></head><body><div class="container"><h1>Traqueur d'Erreurs</h1><p>Cliquez sur le mot qui contient une erreur.</p><div id="sentence"></div><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:'Les pommes sont vert',w:'vert',c:'vertes'},{s:'Il a manger une pomme',w:'manger',c:'mangé'},{s:'Elles sont aller au cinéma',w:'aller',c:'allées'},{s:'J\\'ai beaucoup de livres interessant',w:'interessant',c:'intéressants'}];let current;function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];const sentenceEl=document.getElementById('sentence');sentenceEl.innerHTML='';current.s.split(' ').forEach(word=>{const span=document.createElement('span');span.textContent=word;span.onclick=()=>check(word,span);sentenceEl.appendChild(span)});document.getElementById('feedback').textContent='';}function check(word,span){document.querySelectorAll('#sentence span').forEach(s=>s.onclick=null);if(word===current.w){document.getElementById('feedback').textContent='Correct ! Il fallait écrire "' + current.c + '".';document.getElementById('feedback').className='feedback correct';span.style.backgroundColor='#dbeafe';}else{document.getElementById('feedback').textContent='Incorrect. Essayez encore !';document.getElementById('feedback').className='feedback incorrect';span.style.backgroundColor='#fee2e2';}setTimeout(newSentence,2500);}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newSentence();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_synonym_rally_name", descriptionKey: "game_french_synonymes_desc", html: `<!DOCTYPE html><html><head><title>Rallye des Synonymes</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2563eb}.dark h1{color:#60a5fa}#word{font-size:2em;font-weight:bold;margin:20px 0;}#options button{display:block;width:100%;padding:15px;margin:10px 0;border:2px solid #93c5fd;background:#eff6ff;border-radius:10px;color:#1e3a8a}.dark #options button{background:#1e3a8a;border-color:#2563eb;color:#dbeafe}.correct{background:#dcfce7 !important;border-color:#4ade80 !important;}.dark .correct{background:#14532d !important; border-color:#22c55e !important;}.incorrect{background:#fee2e2 !important;border-color:#f87171 !important;}.dark .incorrect{background:#7f1d1d !important; border-color:#ef4444 !important;}</style></head><body><div class="container"><h1>Rallye des Synonymes</h1><p>Trouvez le synonyme de :</p><div id="word"></div><div id="options"></div></div><script>const words=[{w:'grand',s:'vaste',o:['petit','rapide','froid']},{w:'voiture',s:'automobile',o:['maison','vélo','avion']},{w:'content',s:'joyeux',o:['triste','fatigué','affamé']},{w:'maison',s:'domicile',o:['école','magasin','parc']}];let current;function newWord(){current=words[Math.floor(Math.random()*words.length)];document.getElementById('word').textContent=current.w;const options=[current.s,...current.o].sort(()=>.5-Math.random());const optionsEl=document.getElementById('options');optionsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optionsEl.appendChild(btn)})}function check(opt,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);if(opt===current.s){btn.classList.add('correct');}else{btn.classList.add('incorrect');}setTimeout(newWord,1500);}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newWord();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_the_tuner_name", descriptionKey: "game_french_accords_desc", html: `<!DOCTYPE html><html><head><title>L'Accordeur</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2563eb}.dark h1{color:#60a5fa}button{background:#3b82f6}.dark button{background:#2563eb}#sentence-container{margin:20px 0;font-size:1.4em;line-height:1.8;}#sentence-container select{font-size:1em;padding:5px;border:2px solid #93c5fd;border-radius:8px;background:#eff6ff;font-family:inherit;color:#1e3a8a}.dark #sentence-container select{background:#1e3a8a;border-color:#2563eb;color:#dbeafe}</style></head><body><div class="container"><h1>L'Accordeur</h1><p>Choisissez la bonne forme du participe passé.</p><div id="sentence-container"></div><button id="check-btn">Vérifier</button><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:"Les fleurs qu'il a [cueillir].",o:['cueilli','cueillis','cueillies'],c:'cueillies'},{s:"La pomme que j'ai [manger] était délicieuse.",o:['mangé','mangée','mangés'],c:'mangée'},{s:"Elles se sont [laver] les mains.",o:['lavé','lavée','lavées'],c:'lavé'},{s:"Les lettres que tu as [écrire] sont belles.", o:['écrit', 'écrits', 'écrites'], c:'écrites'}];let current;const sentenceEl=document.getElementById('sentence-container'),checkBtn=document.getElementById('check-btn'),feedbackEl=document.getElementById('feedback');function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];const [start,end]=current.s.split(/\[.*?\]/);let optionsHtml='<select id="participle"><option value="">--</option>';current.o.forEach(opt=>{optionsHtml+='<option value="'+opt+'">'+opt+'</option>';});optionsHtml+='</select>';sentenceEl.innerHTML=start + ' ' + optionsHtml + ' ' + end;feedbackEl.textContent='';checkBtn.disabled=false;}checkBtn.addEventListener('click',()=>{const select=document.getElementById('participle');const answer=select.value;if(answer===current.c){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';checkBtn.disabled=true;setTimeout(newSentence,1500);}else{feedbackEl.textContent='Incorrect, réessayez !';feedbackEl.className='feedback incorrect';}});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newSentence();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_literary_stylist_name", descriptionKey: "game_french_figures_desc", html: `<!DOCTYPE html><html><head><title>Le Styliste Littéraire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2563eb}.dark h1{color:#60a5fa}#quote{font-style:italic;font-size:1.3em;margin:20px 0;padding:15px;background:#dbeafe;border-radius:10px;color:#1e3a8a}.dark #quote{background:#1e3a8a;color:#dbeafe}#options button{display:block;width:100%;padding:12px;margin:8px 0;font-size:1.1em;border:2px solid #93c5fd;background:#eff6ff;border-radius:10px;color:#1e3a8a}.dark #options button{background:#1e40af;border-color:#2563eb;color:#bfdbfe}.correct{background:#dcfce7 !important; border-color:#4ade80 !important;}.dark .correct{background:#14532d !important; border-color:#22c55e !important;}.incorrect{background:#fee2e2 !important; border-color:#f87171 !important;}.dark .incorrect{background:#7f1d1d !important; border-color:#ef4444 !important;}</style></head><body><div class="container"><h1>Le Styliste Littéraire</h1><p>Identifiez la figure de style dans cette phrase :</p><div id="quote"></div><div id="options"></div></div><script>const quotes=[{q:'"Le temps, c\\'est de l\\'argent."',c:'Métaphore',o:['Comparaison','Personnification']},{q:'"Ses yeux brillaient comme des étoiles."',c:'Comparaison',o:['Métaphore','Hyperbole']},{q:'"Le vent hurlait sa colère."',c:'Personnification',o:['Comparaison','Anaphore']},{q:'"Paris ! Paris outragé ! Paris brisé ! Paris martyrisé ! mais Paris libéré !"', c:'Anaphore', o:['Hyperbole', 'Métaphore']}];let current;const quoteEl=document.getElementById('quote'),optionsEl=document.getElementById('options');function newQuote(){current=quotes[Math.floor(Math.random()*quotes.length)];quoteEl.textContent=current.q;const options=[...current.o,current.c].sort(()=>.5-Math.random());optionsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optionsEl.appendChild(btn)})}function check(opt,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);if(opt===current.c){btn.classList.add('correct');}else{btn.classList.add('incorrect');}setTimeout(newQuote,2000)}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newQuote();</script></body></html>`, subjectNameKey: "subject_french" },
    // --- HISTOIRE (5) ---
    { nameKey: "game_history_chrono_duel_name", descriptionKey: "game_history_dates_desc", html: `<!DOCTYPE html><html><head><title>Chrono-Duel</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#facc15}#question{font-size:1.4em;margin-bottom:20px;}#options button{display:block;width:100%;padding:12px;margin:8px 0;font-size:1.1em;border:2px solid #fde047;background:#fef9c3;border-radius:10px;color:#713f12}.dark #options button{background:#422006;border-color:#78350f;color:#fef3c7}#score-board{display:flex;justify-content:space-around;font-weight:bold;margin-top:20px;font-size:1.2em;}</style></head><body><div class="container"><h1>Chrono-Duel</h1><p id="question"></p><div id="options"></div><div id="score-board"><div>Vous: <span id="player-score">0</span></div><div>IA: <span id="ai-score">0</span></div></div><p id="feedback" class="feedback"></p></div><script>const data=[{d:'1789',e:'Révolution française'},{d:'1492',e:"Découverte de l'Amérique"},{d:'1914',e:'Début 1ère GM'},{d:'476',e:"Chute de l'Empire romain d'Occident"},{d:'1945',e:'Fin de la 2nde GM'}];let playerScore=0,aiScore=0,current,buttons;function newQuestion(){current=data[Math.floor(Math.random()*data.length)];const otherEvents=data.filter(i=>i.e!==current.e).sort(()=>.5-Math.random()).slice(0,2).map(i=>i.e);const options=[current.e,...otherEvents].sort(()=>.5-Math.random());document.getElementById('question').textContent="Que s'est-il passé en " + current.d + " ?";const optsEl=document.getElementById('options');optsEl.innerHTML='';buttons=[];options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=()=>check(opt===current.e);optsEl.appendChild(btn);buttons.push(btn)});document.getElementById('feedback').textContent='';}function check(isCorrect){buttons.forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(isCorrect){playerScore++;feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{aiScore++;feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect'}document.getElementById('player-score').textContent=playerScore;document.getElementById('ai-score').textContent=aiScore;if(playerScore>=5||aiScore>=5){setTimeout(()=>{alert(playerScore>aiScore?'Gagné !':'Perdu...');playerScore=0;aiScore=0;newQuestion()},100)}else{setTimeout(newQuestion,1500)}}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newQuestion();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_portraits_name", descriptionKey: "game_history_personnages_desc", html: `<!DOCTYPE html><html><head><title>Portraits d'Histoire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#facc15}button{background:#eab308}.dark button{background:#ca8a04}#clues{list-style:none;padding:0;margin:20px 0;min-height:120px;}.clue{margin:10px 0;font-size:1.2em;opacity:0;transition:opacity .5s ease-in-out;background:#fef9c3;padding:10px;border-radius:8px;color:#713f12}.dark .clue{background:#422006;color:#fef3c7}input{border-color:#fde047}.dark input{border-color:#78350f}input:focus{border-color:#eab308}.dark input:focus{border-color:#facc15}</style></head><body><div class="start-screen"><h1>Portraits d'Histoire</h1><p>Devinez le personnage historique à partir des indices qui apparaissent progressivement.</p><button id="start-btn">Commencer</button></div><div class="container hidden"><h1>Portraits d'Histoire</h1><ul id="clues"></ul><div><input id="guess" placeholder="Votre réponse..."><button id="check-btn">Valider</button></div><p id="feedback" class="feedback"></p></div><script>const people=[{name:'Louis XIV',clues:['Je suis né en 1638.','On m\\'appelle le Roi-Soleil.','J\\'ai fait construire Versailles.']},{name:'Napoléon Bonaparte',clues:['Je suis né en Corse.','J\\'ai été Empereur des Français.','J\\'ai été exilé à Sainte-Hélène.']},{name:'Jeanne d\\'Arc', clues:['J\\'ai entendu des voix.','J\\'ai libéré Orléans.','J\\'ai été brûlée vive à Rouen.']}];let currentPerson,clueIndex,clueInterval;const startScreen=document.querySelector('.start-screen'),gameContainer=document.querySelector('.container'),startBtn=document.getElementById('start-btn'),guessInput=document.getElementById('guess'),checkBtn=document.getElementById('check-btn'),feedbackEl=document.getElementById('feedback');function startGame(){startScreen.classList.add('hidden');gameContainer.classList.remove('hidden');newGame()}function newGame(){currentPerson=people[Math.floor(Math.random()*people.length)];clueIndex=0;const cluesEl=document.getElementById('clues');cluesEl.innerHTML='';currentPerson.clues.forEach(clue=>{const li=document.createElement('li');li.className='clue';li.textContent=clue;cluesEl.appendChild(li)});guessInput.value='';feedbackEl.textContent='';guessInput.disabled=false;checkBtn.disabled=false;clueInterval=setInterval(revealClue,3000);revealClue()}function revealClue(){if(clueIndex<currentPerson.clues.length){document.querySelectorAll('.clue')[clueIndex].style.opacity=1;clueIndex++}else{clearInterval(clueInterval)}}function checkGuess(){const guess=guessInput.value.trim().toLowerCase();if(guess===currentPerson.name.toLowerCase()){feedbackEl.textContent='Bravo ! C\\'était bien '+currentPerson.name;feedbackEl.className='feedback correct';clearInterval(clueInterval);guessInput.disabled=true;checkBtn.disabled=true;setTimeout(newGame,2500)}else{feedbackEl.textContent='Incorrect. Essayez encore !';feedbackEl.className='feedback incorrect';guessInput.value='';guessInput.focus();}}startBtn.addEventListener('click',startGame);checkBtn.addEventListener('click',checkGuess);guessInput.addEventListener('keyup',e=>{if(e.key==='Enter')checkGuess()});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_timeline_name", descriptionKey: "game_history_chrono_desc", html: `<!DOCTYPE html><html><head><title>Le Fil du Temps</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#facc15}button{background:#eab308}.dark button{background:#ca8a04}#timeline,#events{list-style:none;padding:10px;margin:10px;min-height:50px;border:2px dashed #fde047;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}.dark #timeline,.dark #events{border-color:#78350f}li{padding:10px 15px;background:#fef9c3;border-radius:8px;cursor:grab;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#713f12}.dark li{background:#422006;color:#fef3c7}.placeholder{opacity:0.5;background:#fef3c7}.dark .placeholder{background:#78350f}.drag-over{border-color:#eab308;background:rgba(234,179,8,0.05);}.dark .drag-over{border-color:#facc15;background:rgba(250,204,21,0.05)}</style></head><body><div class="container"><h1>Le Fil du Temps</h1><p>Remettez les événements dans l'ordre chronologique.</p><ul id="timeline"></ul><hr style="margin:20px 0;border-color:#93c5fd"><p>Événements à placer :</p><ul id="events"></ul><button id="check-btn">Vérifier</button></div><script>const eventsData=[{event:'Chute de l\\'Empire Romain',year:476},{event:'Prise de la Bastille',year:1789},{event:'Découverte de l\\'Amérique',year:1492},{event:'Fin de la 2nde GM',year:1945}];let draggedItem=null;function init(){document.getElementById('timeline').innerHTML='';const eventsContainer=document.getElementById('events');eventsContainer.innerHTML='';eventsData.sort(()=>.5-Math.random()).forEach(item=>{const li=document.createElement('li');li.textContent=item.event;li.dataset.year=item.year;li.draggable=true;li.addEventListener('dragstart',dragStart);li.addEventListener('dragend',dragEnd);eventsContainer.appendChild(li)});['timeline','events'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',dragOver);el.addEventListener('dragenter',dragEnter);el.addEventListener('dragleave',dragLeave);el.addEventListener('drop',dragDrop)})}function dragStart(e){draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)}function dragEnd(e){e.target.classList.remove('placeholder')}function dragOver(e){e.preventDefault()}function dragEnter(e){e.preventDefault();e.target.closest('ul').classList.add('drag-over')}function dragLeave(e){e.target.closest('ul').classList.remove('drag-over')}function dragDrop(e){const targetUl=e.target.closest('ul');targetUl.appendChild(draggedItem);targetUl.classList.remove('drag-over')}function checkOrder(){const items=document.querySelectorAll('#timeline li');if(items.length<eventsData.length){alert('Veuillez placer tous les événements.');return}const years=Array.from(items).map(li=>parseInt(li.dataset.year));const sortedYears=[...years].sort((a,b)=>a-b);if(JSON.stringify(years)===JSON.stringify(sortedYears)){alert('Bravo ! L\\'ordre est correct !');setTimeout(init,1000)}else{alert('Incorrect. Essayez encore !')}}document.getElementById('check-btn').addEventListener('click',checkOrder);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_ancient_riddles_name", descriptionKey: "game_history_civilisations_desc", html: `<!DOCTYPE html><html><head><title>Énigmes Antiques</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#facc15}#question{margin:20px 0;font-size:1.2em;}#options button{width:100%;padding:10px;margin:5px 0;background:#fef9c3;border:none;border-radius:10px;color:#713f12}.dark #options button{background:#422006;color:#fef3c7}.correct{background:#dcfce7 !important;}.dark .correct{background:#14532d !important;}.incorrect{background:#fee2e2 !important;}.dark .incorrect{background:#7f1d1d !important;}</style></head><body><div class="container"><h1>Énigmes Antiques</h1><p id="question"></p><div id="options"></div><p class="feedback" id="feedback"></p></div><script>const questions=[{q:'Quelle civilisation a construit les pyramides de Gizeh ?',c:'Égyptienne',o:['Romaine','Grecque','Mésopotamienne']},{q:'Où est née la démocratie ?',c:'Grèce',o:['Égypte','Rome','Perse']},{q:'Quel empire a construit le Colisée ?',c:'Romain',o:['Grec','Égyptien','Carlovingien']}];let current;function newQuestion(){current=questions[Math.floor(Math.random()*questions.length)];document.getElementById('question').textContent=current.q;const options=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)});document.getElementById('feedback').textContent='';}function check(answer,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(answer===current.c){btn.classList.add('correct');feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{btn.classList.add('incorrect');feedbackEl.textContent='Faux. La bonne réponse était '+current.c;feedbackEl.className='feedback incorrect'}setTimeout(newQuestion,2000)}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newQuestion();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_treasure_maps_name", descriptionKey: "game_history_explorateurs_desc", html: `<!DOCTYPE html><html><head><title>Cartes aux Trésors</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#facc15}.container{max-width:600px}#columns{display:flex;justify-content:space-between;gap:10px}.column{width:48%;}ul{padding:0;list-style:none}li{background:#fef9c3;margin:10px 0;padding:12px;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .2s;color:#713f12}.dark li{background:#422006;color:#fef3c7}.selected{border-color:#eab308;transform:scale(1.05);box-shadow:0 0 10px rgba(234,179,8,0.5)}.dark .selected{border-color:#facc15}</style></head><body><div class="container"><h1>Cartes aux Trésors</h1><p>Reliez l'explorateur à sa découverte majeure.</p><div id="columns"><ul id="explorers" class="column"></ul><ul id="discoveries" class="column"></ul></div><p class="feedback" id="feedback"></p></div><script>const data={'Christophe Colomb':'Amérique','Vasco de Gama':'Route des Indes par la mer','Jacques Cartier':'Canada','Magellan':'Premier tour du monde'};let selectedExplorer=null,selectedDiscovery=null;function init(){const explorersEl=document.getElementById('explorers'),discoveriesEl=document.getElementById('discoveries');explorersEl.innerHTML='';discoveriesEl.innerHTML='';const explorers=Object.keys(data).sort(()=>.5-Math.random());const discoveries=Object.values(data).sort(()=>.5-Math.random());explorers.forEach(e=>{const li=document.createElement('li');li.textContent=e;li.dataset.name=e;li.onclick=()=>{selectItem(li,'explorer')};explorersEl.appendChild(li)});discoveries.forEach(d=>{const li=document.createElement('li');li.textContent=d;li.dataset.name=d;li.onclick=()=>{selectItem(li,'discovery')};discoveriesEl.appendChild(li)})}function selectItem(li,type){document.querySelectorAll('.selected').forEach(el=>el.classList.remove('selected'));li.classList.add('selected');if(type==='explorer')selectedExplorer=li;else selectedDiscovery=li;if(selectedExplorer&&selectedDiscovery)checkMatch()}function checkMatch(){const feedbackEl=document.getElementById('feedback');if(data[selectedExplorer.dataset.name]===selectedDiscovery.dataset.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';selectedExplorer.remove();selectedDiscovery.remove();if(document.getElementById('explorers').children.length===0)setTimeout(()=>{alert('Bravo, vous avez tout trouvé !');init()},500)}else{feedbackEl.textContent='Faux, essayez encore.';feedbackEl.className='feedback incorrect';}selectedExplorer=null;selectedDiscovery=null;const allLi=document.querySelectorAll('li');setTimeout(()=>{feedbackEl.textContent='';allLi.forEach(li=>li.classList.remove('selected'))},1000)}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_history" },
    // --- SVT (5) ---
    { nameKey: "game_svt_dr_anato_name", descriptionKey: "game_svt_body_parts_desc", html: `<!DOCTYPE html><html><head><title>Docteur Anato</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#16a34a}.dark h1{color:#4ade80}#human-body{position:relative;width:300px;height:500px;margin:20px auto;}.hotspot{position:absolute;background:rgba(239,68,68,0.5);border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s;}.hotspot:hover{transform:scale(1.1);border-color:white;}#Tête{width:60px;height:60px;top:5%;left:40%}#Coeur{width:40px;height:40px;top:30%;left:45%}#Poumons{top:28%;left:30%;width:100px;height:60px;border-radius:30px}#Estomac{width:50px;height:50px;top:45%;left:42%}#Foie{width:60px;height:50px;top:40%;left:25%;border-radius:40% 60% 40% 60% / 70% 50% 50% 30%}.dark #human-body img{filter:grayscale(50%) brightness(0.8)}</style></head><body><div class="container"><h1>Docteur Anato</h1><p>Cliquez sur : <strong id="target-organ" style="color:#16a34a;font-size:1.2em;"></strong></p><div id="human-body"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 250'%3E%3Cpath fill='%23e2e8f0' d='M75 5 C 90 5 100 20 100 35 C 100 50 110 55 110 75 L 115 150 L 95 245 L 55 245 L 35 150 L 40 75 C 40 55 50 50 50 35 C 50 20 60 5 75 5 Z'/%3E%3C/svg%3E" alt="Corps humain"><div class="hotspot" id="Tête"></div><div class="hotspot" id="Coeur"></div><div class="hotspot" id="Poumons"></div><div class="hotspot" id="Estomac"></div><div class="hotspot" id="Foie"></div></div><p class="feedback" id="feedback"></p></div><script>const organs=['Tête','Coeur','Poumons','Estomac','Foie'];let currentOrgan;function newQuestion(){currentOrgan=organs[Math.floor(Math.random()*organs.length)];document.getElementById('target-organ').textContent=currentOrgan;document.getElementById('feedback').textContent=''}document.querySelectorAll('.hotspot').forEach(el=>{el.addEventListener('click',e=>{const feedbackEl=document.getElementById('feedback');if(e.target.id===currentOrgan){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';setTimeout(newQuestion,1000)}else{feedbackEl.textContent='Faux, essayez encore !';feedbackEl.className='feedback incorrect'}})});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newQuestion();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_life_cycle_name", descriptionKey: "game_svt_food_chain_desc", html: `<!DOCTYPE html><html><head><title>Le Cycle de la Vie</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#16a34a}.dark h1{color:#4ade80}button{background:#22c55e}.dark button{background:#16a34a}#chain,#options{list-style:none;padding:10px;margin:10px;min-height:70px;border:2px dashed #86efac;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}.dark #chain,.dark #options{border-color:#15803d}li{padding:10px 15px;background:#dcfce7;border-radius:8px;cursor:grab;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#14532d}.dark li{background:#064e3b;color:#dcfce7}.placeholder{opacity:0.5;background:#bbf7d0}.dark .placeholder{background:#14532d}.drag-over{border-color:#22c55e;background:rgba(34,197,94,0.05);}.dark .drag-over{border-color:#4ade80;background:rgba(74,222,128,0.05)}</style></head><body><div class="container"><h1>Le Cycle de la Vie</h1><p>Placez les éléments dans le bon ordre (de mangé à mangeur).</p><ul id="chain"></ul><hr style="margin:20px 0;border-color:#86efac"><p>Éléments :</p><ul id="options"></ul><button id="check-btn">Vérifier</button></div><script>const chainData=['Feuille','Chenille','Oiseau','Renard'];let draggedItem=null;function init(){document.getElementById('chain').innerHTML='';const optionsContainer=document.getElementById('options');optionsContainer.innerHTML='';chainData.sort(()=>.5-Math.random()).forEach(item=>{const li=document.createElement('li');li.textContent=item;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});li.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));optionsContainer.appendChild(li)});['chain','options'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();e.target.closest('ul').classList.add('drag-over')});el.addEventListener('dragleave',e=>e.target.closest('ul').classList.remove('drag-over'));el.addEventListener('drop',e=>{e.target.closest('ul').appendChild(draggedItem);e.target.closest('ul').classList.remove('drag-over')})})}function checkOrder(){const items=document.querySelectorAll('#chain li');if(items.length<chainData.length){alert('Veuillez placer tous les éléments.');return}const userOrder=Array.from(items).map(li=>li.textContent);if(JSON.stringify(userOrder)===JSON.stringify(chainData)){alert('Bravo ! L\\'ordre est correct !');setTimeout(init,1000)}else{alert('Incorrect. Essayez encore !')}}document.getElementById('check-btn').addEventListener('click',checkOrder);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_micro_adventure_name", descriptionKey: "game_svt_cellule_desc", html: `<!DOCTYPE html><html><head><title>Micro-Aventure</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#16a34a}.dark h1{color:#4ade80}#cell-diagram{position:relative;width:300px;height:300px;margin:20px auto}#cell-diagram .cell-body{width:100%;height:100%;background:#dcfce7;border-radius:50%;border:5px solid #22c55e}.dark #cell-diagram .cell-body{background:#052e16;border-color:#16a34a}.hotspot{position:absolute;border-radius:50%;cursor:pointer;transition:all .2s;border:2px solid rgba(255,255,255,0.7)}.hotspot:hover{transform:scale(1.2)}#Noyau{top:40%;left:40%;width:60px;height:60px;background:#f87171}#Mitochondrie{top:20%;left:60%;width:40px;height:25px;border-radius:12px;background:#facc15}#Vacuole{top:65%;left:25%;width:50px;height:40px;border-radius:40%;background:#60a5fa}</style></head><body><div class="container"><h1>Micro-Aventure</h1><p>Cliquez sur : <strong id="target-organelle" style="color:#16a34a;font-size:1.2em;"></strong></p><div id="cell-diagram"><div class="cell-body"></div><div id="Noyau" class="hotspot"></div><div id="Mitochondrie" class="hotspot"></div><div id="Vacuole" class="hotspot"></div></div><p class="feedback" id="feedback"></p></div><script>const organelles=['Noyau','Mitochondrie','Vacuole'];let currentOrganelle;function newQuestion(){currentOrganelle=organelles[Math.floor(Math.random()*organelles.length)];document.getElementById('target-organelle').textContent=currentOrganelle;document.getElementById('feedback').textContent=''}document.querySelectorAll('.hotspot').forEach(el=>{el.addEventListener('click',e=>{const feedbackEl=document.getElementById('feedback');if(e.target.id===currentOrganelle){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';setTimeout(newQuestion,1000)}else{feedbackEl.textContent='Faux, essayez encore !';feedbackEl.className='feedback incorrect'}})});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newQuestion();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_logical_zoo_name", descriptionKey: "game_svt_animaux_desc", html: `<!DOCTYPE html><html><head><title>Le Zoo Logique</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#16a34a}.dark h1{color:#4ade80}button{background:#22c55e}.dark button{background:#16a34a}.container{max-width:800px}#columns{display:flex;justify-content:space-around;margin-top:20px;gap:10px}.category{width:48%;min-height:200px;border:2px dashed #86efac;padding:10px;border-radius:10px;transition:all .2s}.dark .category{border-color:#15803d}.drag-over{border-color:#22c55e;background:rgba(34,197,94,0.05);}.dark .drag-over{border-color:#4ade80;background:rgba(74,222,128,0.05)}#animals{min-height:100px;border:2px dashed #86efac;padding:10px;border-radius:10px;margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.dark #animals{border-color:#15803d}.animal{padding:10px;background:#dcfce7;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#14532d}.dark .animal{background:#064e3b;color:#dcfce7}.placeholder{opacity:0.5;background:#bbf7d0}.dark .placeholder{background:#14532d}</style></head><body><div class="container"><h1>Le Zoo Logique</h1><p>Glissez chaque animal dans la bonne catégorie.</p><div id="columns"><div id="mammals" class="category"><h3>Mammifères</h3></div><div id="reptiles" class="category"><h3>Reptiles</h3></div></div><p style="margin-top:20px;">Animaux à classer :</p><div id="animals"></div><button id="check-btn">Vérifier</button></div><script>const data={mammals:['Chat','Chien','Baleine'],reptiles:['Serpent','Lézard','Tortue']};let draggedItem=null;function init(){document.querySelectorAll('.category').forEach(c=>{c.innerHTML='<h3>'+(c.id==='mammals'?'Mammifères':'Reptiles')+'</h3>'});const animalsContainer=document.getElementById('animals');animalsContainer.innerHTML='';[...data.mammals,...data.reptiles].sort(()=>.5-Math.random()).forEach(name=>{const div=document.createElement('div');div.className='animal';div.textContent=name;div.draggable=true;div.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});div.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));animalsContainer.appendChild(div)});['mammals','reptiles','animals'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function check(){let correct=true;document.querySelectorAll('.category').forEach(cat=>{const categoryName=cat.id;Array.from(cat.children).slice(1).forEach(animalEl=>{if(!data[categoryName].includes(animalEl.textContent)){correct=false}})});alert(correct?'Bravo ! Tout est correct !':'Il y a des erreurs. Essayez encore !');init()}document.getElementById('check-btn').addEventListener('click',check);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_aqua_cycle_name", descriptionKey: "game_svt_water_cycle_desc", html: `<!DOCTYPE html><html><head><title>Aqua-Cycle</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#16a34a}.dark h1{color:#4ade80}button{background:#22c55e}.dark button{background:#16a34a}#steps,#options{list-style:none;padding:10px;margin:10px;min-height:50px;border:2px dashed #86efac;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.dark #steps,.dark #options{border-color:#15803d}li{padding:10px;background:#dcfce7;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#14532d}.dark li{background:#064e3b;color:#dcfce7}.drag-over{border-color:#22c55e;background:rgba(34,197,94,0.05);}.dark .drag-over{border-color:#4ade80;background:rgba(74,222,128,0.05)}</style></head><body><div class="container"><h1>Aqua-Cycle</h1><p>Remettez les étapes du cycle de l'eau dans l'ordre.</p><ul id="steps"></ul><hr style="margin:20px 0;border-color:#86efac"><p>Étapes :</p><ul id="options"></ul><button id="check-btn">Vérifier</button></div><script>const steps=['Évaporation','Condensation','Précipitation','Collection'];let draggedItem=null;function init(){document.getElementById('steps').innerHTML='';const optionsEl=document.getElementById('options');optionsEl.innerHTML='';steps.sort(()=>.5-Math.random()).forEach(s=>{const li=document.createElement('li');li.textContent=s;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.style.opacity='0.5',0)});li.addEventListener('dragend',e=>e.target.style.opacity='1');optionsEl.appendChild(li)});['steps','options'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function checkOrder(){const items=document.querySelectorAll('#steps li');if(items.length<steps.length){alert('Veuillez placer toutes les étapes.');return}const userOrder=Array.from(items).map(li=>li.textContent);if(JSON.stringify(userOrder)===JSON.stringify(steps)){alert('Correct !');setTimeout(init,1000)}else alert('Incorrect. Essayez encore !')}document.getElementById('check-btn').addEventListener('click',checkOrder);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_svt" },
    // --- ANGLAIS (5) ---
    { nameKey: "game_english_word_flash_name", descriptionKey: "game_english_vocab_desc", html: `<!DOCTYPE html><html><head><title>Word Flash</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7c3aed}.dark h1{color:#a78bfa}button{background:#8b5cf6}.dark button{background:#7c3aed}#card{width:100%;max-width:350px;height:180px;perspective:1000px;margin:20px 0;cursor:pointer;}#card-inner{position:relative;width:100%;height:100%;transition:transform 0.6s;transform-style:preserve-3d;}.card-face{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;justify-content:center;align-items:center;font-size:1.8em;font-weight:bold;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.front{background:#ede9fe;color:#5b21b6}.dark .front{background:#3730a3;color:#c4b5fd}.back{background:#ddd6fe;color:#5b21b6;transform:rotateY(180deg);}.dark .back{background:#4338ca;color:#c4b5fd}.flipped{transform:rotateY(180deg);}</style></head><body><div class="container"><h1>Word Flash</h1><p>Retournez la carte pour voir la traduction, puis passez à la suivante.</p><div id="card"><div id="card-inner"><div class="card-face front"></div><div class="card-face back"></div></div></div><button id="next-btn">Suivant</button></div><script>const vocab=[{fr:'Maison',en:'House'},{fr:'Voiture',en:'Car'},{fr:'Pomme',en:'Apple'},{fr:'Livre',en:'Book'},{fr:'Ordinateur',en:'Computer'}];let current=0;const card=document.getElementById('card'),cardInner=document.getElementById('card-inner'),nextBtn=document.getElementById('next-btn');function showCard(){cardInner.classList.remove('flipped');setTimeout(()=>{document.querySelector('.front').textContent=vocab[current].fr;document.querySelector('.back').textContent=vocab[current].en},300)}function flip(){cardInner.classList.toggle('flipped')}function next(){current=(current+1)%vocab.length;showCard()}card.addEventListener('click',flip);nextBtn.addEventListener('click',next);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');showCard();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_verb_master_name", descriptionKey: "game_english_tenses_desc", html: `<!DOCTYPE html><html><head><title>Verb Master</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7c3aed}.dark h1{color:#a78bfa}#verb{font-size:2em;font-weight:700;margin:20px 0}input{border-color:#c4b5fd}.dark input{border-color:#4338ca}input:focus{border-color:#8b5cf6}.dark input:focus{border-color:#a78bfa}</style></head><body><div class="container"><h1>Verb Master</h1><p>Donnez le prétérit de :</p><div id="verb"></div><input id="answer" type="text" autocomplete="off" autocorrect="off"><p id="feedback" class="feedback"></p></div><script>const verbs=[{inf:'go',past:'went'},{inf:'be',past:'was/were'},{inf:'eat',past:'ate'},{inf:'see',past:'saw'},{inf:'take',past:'took'},{inf:'give',past:'gave'}];let current;function newVerb(){current=verbs[Math.floor(Math.random()*verbs.length)];document.getElementById('verb').textContent=current.inf;document.getElementById('answer').value='';document.getElementById('feedback').textContent='';document.getElementById('answer').focus()}document.getElementById('answer').addEventListener('keyup',e=>{if(e.key==='Enter'){const feedbackEl=document.getElementById('feedback');if(document.getElementById('answer').value.toLowerCase()===current.past){feedbackEl.textContent='Correct!';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux, la réponse était: '+current.past;feedbackEl.className='feedback incorrect'}setTimeout(newVerb,1500)}});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newVerb();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_word_rescue_name", descriptionKey: "game_english_hangman_desc", html: `<!DOCTYPE html><html><head><title>Word Rescue</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7c3aed}.dark h1{color:#a78bfa}button{background:#8b5cf6}.dark button{background:#7c3aed}#word-display{font-size:2em;letter-spacing:.5em;margin:20px 0}#keyboard{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;max-width:400px;margin:20px auto}#keyboard button{font-size:1em;width:35px;height:35px;border:1px solid #ddd6fe;border-radius:5px;background:#f5f3ff}.dark #keyboard button{background:#3730a3;border-color:#4338ca;color:#e0e7ff}#keyboard button:disabled{background:#e9d5ff;color:#a8a29e}.dark #keyboard button:disabled{background:#282369;color:#5c56b1}#hangman-svg{width:150px;height:180px}#hangman-svg path{transition:opacity 0.3s;stroke:#4c1d95}.dark #hangman-svg path{stroke:#a78bfa}</style></head><body><div class="container"><h1>Word Rescue</h1><svg id="hangman-svg" viewBox="0 0 100 120"><path d="M 10 110 H 90" stroke="#78716c" stroke-width="4"/><path d="M 30 110 V 10 H 70 V 20" stroke="#78716c" stroke-width="4" fill="none"/><path id="head" d="M 70 30 a 10 10 0 1 1 -20 0 a 10 10 0 1 1 20 0" stroke-width="3" fill="none" style="opacity:0"/><path id="body" d="M 60 40 V 70" stroke-width="3" fill="none" style="opacity:0"/><path id="arm-l" d="M 60 50 L 45 60" stroke-width="3" fill="none" style="opacity:0"/><path id="arm-r" d="M 60 50 L 75 60" stroke-width="3" fill="none" style="opacity:0"/><path id="leg-l" d="M 60 70 L 45 90" stroke-width="3" fill="none" style="opacity:0"/><path id="leg-r" d="M 60 70 L 75 90" stroke-width="3" fill="none" style="opacity:0"/></svg><div id="word-display"></div><div id="keyboard"></div><button onclick="init()">Nouveau Mot</button></div><script>const words=['APPLE','BANANA','ORANGE','COMPUTER','DEVELOPER','LANGUAGE'];let word,guessed,mistakes;const parts=['head','body','arm-l','arm-r','leg-l','leg-r'];function init(){word=words[Math.floor(Math.random()*words.length)];guessed=new Set();mistakes=0;parts.forEach(p=>document.getElementById(p).style.opacity='0');updateWordDisplay();createKeyboard()}function updateWordDisplay(){document.getElementById('word-display').textContent=word.split('').map(l=>guessed.has(l)?l:'_').join('')}function createKeyboard(){const kb=document.getElementById('keyboard');kb.innerHTML='';for(let i=65;i<=90;i++){const l=String.fromCharCode(i);const btn=document.createElement('button');btn.textContent=l;btn.onclick=()=>handleGuess(l,btn);kb.appendChild(btn)}}function handleGuess(letter,btn){if(guessed.has(letter))return;guessed.add(letter);btn.disabled=true;if(word.includes(letter)){updateWordDisplay();if(!document.getElementById('word-display').textContent.includes('_')){setTimeout(()=>alert('Gagné! Vous avez sauvé le mot !'),100)}}else{mistakes++;document.getElementById(parts[mistakes-1]).style.opacity='1';if(mistakes>=parts.length){setTimeout(()=>alert('Perdu! Le mot était '+word),100)}}}if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_sentence_builder_name", descriptionKey: "game_english_scramble_desc", html: `<!DOCTYPE html><html><head><title>Sentence Builder</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7c3aed}.dark h1{color:#a78bfa}button{background:#8b5cf6}.dark button{background:#7c3aed}#answer-zone,#word-bank{list-style:none;padding:10px;margin:10px 0;min-height:50px;border:2px dashed #c4b5fd;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}.dark #answer-zone,.dark #word-bank{border-color:#5b21b6}li{padding:10px 15px;background:#ede9fe;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#5b21b6}.dark li{background:#3730a3;color:#c4b5fd}.placeholder{opacity:0.5;}.drag-over{border-color:#8b5cf6;background:rgba(139,92,246,0.05)}.dark .drag-over{border-color:#a78bfa;background:rgba(167,139,250,0.05)}</style></head><body><div class="container"><h1>Sentence Builder</h1><p>Remettez les mots dans l'ordre pour former une phrase.</p><ul id="answer-zone"></ul><p style="margin:20px 0; font-weight:bold;">Mots :</p><ul id="word-bank"></ul><button id="check-btn">Vérifier</button></div><script>const sentences=['I love to learn new things','She is reading a book in the library','The sun shines brightly in the sky'];let current,draggedItem=null;function init(){current=sentences[Math.floor(Math.random()*sentences.length)];document.getElementById('answer-zone').innerHTML='';const bank=document.getElementById('word-bank');bank.innerHTML='';current.split(' ').sort(()=>.5-Math.random()).forEach(w=>{const li=document.createElement('li');li.textContent=w;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});li.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));bank.appendChild(li)});['answer-zone','word-bank'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function check(){const items=document.querySelectorAll('#answer-zone li');if(items.length < current.split(' ').length){alert('Veuillez utiliser tous les mots.'); return;}const userAnswer=Array.from(items).map(li=>li.textContent).join(' ');if(userAnswer===current){alert('Correct!');setTimeout(init,500)}else alert('Faux, essayez encore !')}document.getElementById('check-btn').addEventListener('click',check);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');init();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_preposition_puzzle_name", descriptionKey: "game_english_prepositions_desc", html: `<!DOCTYPE html><html><head><title>Preposition Puzzle</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7c3aed}.dark h1{color:#a78bfa}button{background:#8b5cf6}.dark button{background:#7c3aed}#sentence{font-size:1.3em;margin:20px 0;}select{font-size:1.1em;padding:5px;border-radius:8px;border:2px solid #ddd6fe;background:#f5f3ff;font-family:inherit;}.dark select{background:#3730a3;border-color:#5b21b6;color:#e0e7ff}</style></head><body><div class="container"><h1>Preposition Puzzle</h1><p>Choisissez la bonne préposition.</p><div id="sentence"></div><button id="check-btn">Check</button><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:'The cat is ___ the table.',c:'on',o:['in','at','under']},{s:'He arrived ___ 8 PM.',c:'at',o:['on','in','by']},{s:'I live ___ Paris.',c:'in',o:['at','on','from']}];let current;function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];const [start,end]=current.s.split('___');const select='<select id="prep-select"><option>--</option>'+[...current.o,current.c].sort(()=>.5-Math.random()).map(p=>'<option value="'+p+'">'+p+'</option>').join('')+'</select>';document.getElementById('sentence').innerHTML=start+select+end;document.getElementById('feedback').textContent='';document.getElementById('check-btn').disabled=false}document.getElementById('check-btn').addEventListener('click',()=>{const userAnswer=document.getElementById('prep-select').value;const feedbackEl=document.getElementById('feedback');if(userAnswer===current.c){feedbackEl.textContent='Correct!';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Incorrect, try again!';feedbackEl.className='feedback incorrect'}if(userAnswer===current.c)setTimeout(newSentence,1500)});if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');newSentence();</script></body></html>`, subjectNameKey: "subject_english" },
    // --- PHYSIQUE-CHIMIE (2 + 3 = 5) ---
    { nameKey: "game_physics_symbol_alchemy_name", descriptionKey: "game_physics_symbols_desc", html: `<!DOCTYPE html><html><head><title>Alchimie des Symboles</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0d9488}.dark h1{color:#2dd4bf}#columns{display:flex;justify-content:space-around}ul{list-style:none;padding:0}.item{margin:10px;padding:15px;background:#ccfbf1;border-radius:10px;cursor:pointer;border:2px solid transparent;transition:all .2s;color:#047857}.dark .item{background:#042f2e;color:#5eead4}.selected{border-color:#14b8a6;transform:scale(1.05)}</style></head><body><div class="container"><h1>Alchimie des Symboles</h1><p>Reliez chaque élément à son symbole chimique.</p><div id="columns"><ul id="elements"></ul><ul id="symbols"></ul></div><p id="feedback" class="feedback"></p></div><script>const elements={'Hydrogène':'H','Oxygène':'O','Carbone':'C','Fer':'Fe'};let selectedElement=null,selectedSymbol=null;function init(){const elementsEl=document.getElementById('elements'),symbolsEl=document.getElementById('symbols');elementsEl.innerHTML='';symbolsEl.innerHTML='';const elementNames=Object.keys(elements).sort(()=>.5-Math.random());const symbolNames=Object.values(elements).sort(()=>.5-Math.random());elementNames.forEach(name=>{const li=document.createElement('li');li.className='item';li.textContent=name;li.onclick=()=>select(li,'element');elementsEl.appendChild(li)});symbolNames.forEach(name=>{const li=document.createElement('li');li.className='item';li.textContent=name;li.onclick=()=>select(li,'symbol');symbolsEl.appendChild(li)})}function select(el,type){if(type==='element')selectedElement=el;else selectedSymbol=el;document.querySelectorAll('.item').forEach(e=>e.classList.remove('selected'));el.classList.add('selected');if(selectedElement&&selectedSymbol)check()}function check(){const feedbackEl=document.getElementById('feedback');if(elements[selectedElement.textContent]===selectedSymbol.textContent){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';selectedElement.style.visibility='hidden';selectedSymbol.style.visibility='hidden';if(document.querySelectorAll('.item[style*=\\"hidden\\"]').length===Object.keys(elements).length*2)setTimeout(()=>{alert('Gagné !');init()},500)}else{feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect';setTimeout(()=>feedbackEl.textContent='',1000)}selectedElement=null;selectedSymbol=null;document.querySelectorAll('.item').forEach(e=>e.classList.remove('selected'))}init();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_physics" },
    { nameKey: "game_physics_formulator_name", descriptionKey: "game_physics_formulas_desc", html: `<!DOCTYPE html><html><head><title>Le Formulator</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0d9488}.dark h1{color:#2dd4bf}#question{font-size:1.3em;margin-bottom:15px}#options-container button{display:block;width:100%;padding:12px;margin:8px 0;background:#99f6e4;border-radius:10px;color:#115e59;font-size:1.1em}.dark #options-container button{background:#075985;color:#e0f2fe}.correct{background:#a7f3d0 !important}.dark .correct{background:#10b981 !important}.incorrect{background:#fecaca !important}.dark .incorrect{background:#f87171 !important}</style></head><body><div class="container"><h1>Le Formulator</h1><p id="question"></p><div id="options-container"></div></div><script>const formulas=[{q:"Quelle est la loi d'Ohm ?",c:'U = R x I',o:['P = U x I','E = m x c²']},{q:"Quelle est la formule de la puissance électrique ?",c:'P = U x I',o:['U = R x I','d = v x t']}];let current;function newQuestion(){current=formulas[Math.floor(Math.random()*formulas.length)];document.getElementById('question').textContent=current.q;const opts=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options-container');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)})}function check(answer,btn){document.querySelectorAll('#options-container button').forEach(b=>b.disabled=true);if(answer===current.c){btn.classList.add('correct')}else{btn.classList.add('incorrect')}setTimeout(newQuestion,1500)}newQuestion();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_physics" },
    { nameKey: "game_physics_unit_master_name", descriptionKey: "game_physics_unit_master_desc", html: `<!DOCTYPE html><html><head><title>Maître des Unités</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0d9488}.dark h1{color:#2dd4bf}#columns{display:flex;justify-content:space-around}ul{list-style:none;padding:0}.item{margin:10px;padding:15px;background:#ccfbf1;border-radius:10px;cursor:pointer;border:2px solid transparent;transition:all .2s;color:#047857}.dark .item{background:#042f2e;color:#5eead4}.selected{border-color:#14b8a6;transform:scale(1.05)}</style></head><body><div class="container"><h1>Maître des Unités</h1><p>Associez chaque grandeur à son unité SI.</p><div id="columns"><ul id="quantities"></ul><ul id="units"></ul></div><p id="feedback" class="feedback"></p></div><script>const data={'Tension':'Volt (V)','Intensité':'Ampère (A)','Résistance':'Ohm (Ω)','Puissance':'Watt (W)'};let selectedQuantity=null,selectedUnit=null;function init(){const quantitiesEl=document.getElementById('quantities'),unitsEl=document.getElementById('units');quantitiesEl.innerHTML='';unitsEl.innerHTML='';const quantities=Object.keys(data).sort(()=>.5-Math.random());const units=Object.values(data).sort(()=>.5-Math.random());quantities.forEach(name=>{const li=document.createElement('li');li.className='item';li.textContent=name;li.onclick=()=>select(li,'quantity');quantitiesEl.appendChild(li)});units.forEach(name=>{const li=document.createElement('li');li.className='item';li.textContent=name;li.onclick=()=>select(li,'unit');unitsEl.appendChild(li)})}function select(el,type){if(type==='quantity')selectedQuantity=el;else selectedUnit=el;document.querySelectorAll('.item').forEach(e=>e.classList.remove('selected'));el.classList.add('selected');if(selectedQuantity&&selectedUnit)check()}function check(){const feedbackEl=document.getElementById('feedback');if(data[selectedQuantity.textContent]===selectedUnit.textContent){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';selectedQuantity.style.visibility='hidden';selectedUnit.style.visibility='hidden';if(document.querySelectorAll('.item[style*=\\"hidden\\"]').length===Object.keys(data).length*2)setTimeout(()=>{alert('Bravo, tout trouvé !');init()},500)}else{feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect';setTimeout(()=>feedbackEl.textContent='',1000)}selectedQuantity=null;selectedUnit=null;document.querySelectorAll('.item').forEach(e=>e.classList.remove('selected'))}init();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_physics" },
    { nameKey: "game_physics_ph_lab_name", descriptionKey: "game_physics_ph_lab_desc", html: `<!DOCTYPE html><html><head><title>Labo pH</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0d9488}.dark h1{color:#2dd4bf}.beaker{width:100px;height:150px;border:5px solid #0f766e;border-top:none;border-radius:0 0 10px 10px;margin:20px auto;position:relative}.liquid{position:absolute;bottom:0;left:0;right:0;height:70%;transition:background-color .5s}.options button{margin:5px;background:#99f6e4;color:#115e59}.dark .options button{background:#075985;color:#e0f2fe}</style></head><body><div class="container"><h1>Labo pH</h1><p>Testez le pH de la substance : <strong id="substance-name"></strong></p><div class="beaker"><div id="liquid" class="liquid"></div></div><div class="options"><button onclick="check('Acide')">Acide</button><button onclick="check('Basique')">Basique</button><button onclick="check('Neutre')">Neutre</button></div><p class="feedback" id="feedback"></p></div><script>const substances=[{name:'Jus de citron',ph:2,type:'Acide'},{name:'Eau de Javel',ph:13,type:'Basique'},{name:'Eau pure',ph:7,type:'Neutre'},{name:'Vinaigre',ph:3,type:'Acide'}];let current;function newSubstance(){current=substances[Math.floor(Math.random()*substances.length)];document.getElementById('substance-name').textContent=current.name;const liquidEl=document.getElementById('liquid');const h=current.ph/14*255;liquidEl.style.backgroundColor='hsl('+h+', 70%, 50%)';document.getElementById('feedback').textContent='';document.querySelectorAll('button').forEach(b=>b.disabled=false)}function check(answer){document.querySelectorAll('button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(answer===current.type){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux ! C\\'était '+current.type;feedbackEl.className='feedback incorrect'}setTimeout(newSubstance,2000)}newSubstance();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_physics" },
    // --- TECHNOLOGIE (1 + 3 = 4) ---
    { nameKey: "game_tech_binary_coder_name", descriptionKey: "game_tech_logic_gates_desc", html: `<!DOCTYPE html><html><head><title>Code Binaire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#475569}.dark h1{color:#cbd5e1}#number{font-size:3em;font-weight:bold;margin:20px 0}input{border-color:#94a3b8}.dark input{border-color:#475569}input:focus{border-color:#475569}.dark input:focus{border-color:#cbd5e1}</style></head><body><div class="container"><h1>Code Binaire</h1><p>Convertissez ce nombre en binaire :</p><div id="number"></div><input id="answer" placeholder="Votre réponse binaire..."><p id="feedback" class="feedback"></p></div><script>let currentNumber,currentBinary;function newNumber(){currentNumber=Math.floor(Math.random()*30)+1;currentBinary=currentNumber.toString(2);document.getElementById('number').textContent=currentNumber;document.getElementById('answer').value='';document.getElementById('feedback').textContent='';document.getElementById('answer').focus()}document.getElementById('answer').addEventListener('keyup',e=>{if(e.key==='Enter'){const userAnswer=document.getElementById('answer').value.trim();const feedbackEl=document.getElementById('feedback');if(userAnswer===currentBinary){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux. La réponse était '+currentBinary;feedbackEl.className='feedback incorrect'}setTimeout(newNumber,1500)}});newNumber();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_technology" },
    { nameKey: "game_tech_pc_builder_name", descriptionKey: "game_tech_pc_builder_desc", html: `<!DOCTYPE html><html><head><title>PC Builder</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#475569}.dark h1{color:#cbd5e1}button{background:#64748b}.dark button{background:#475569}#case,#parts{min-height:200px;width:100%;border:3px dashed #94a3b8;border-radius:10px;display:flex;flex-wrap:wrap;padding:10px;gap:10px;}.dark #case,.dark #parts{border-color:#475569}.part{padding:10px;background:#e2e8f0;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark .part{background:#1e293b;color:#e2e8f0}.drag-over{border-color:#64748b;background:rgba(100,116,139,0.05)}</style></head><body><div class="container"><h1>PC Builder</h1><p>Glissez les composants dans le boîtier.</p><div id="case"><h4>Boîtier</h4></div><hr style="margin:20px 0;"><p>Composants:</p><div id="parts"></div><button id="check-btn">Vérifier</button></div><script>const parts=['CPU','RAM','GPU','Carte Mère'];let draggedItem=null;function init(){document.getElementById('case').innerHTML='<h4>Boîtier</h4>';const partsEl=document.getElementById('parts');partsEl.innerHTML='';parts.sort(()=>.5-Math.random()).forEach(p=>{const div=document.createElement('div');div.className='part';div.textContent=p;div.draggable=true;div.addEventListener('dragstart',e=>{draggedItem=e.target});partsEl.appendChild(div)});['case','parts'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();if(draggedItem&&e.currentTarget.contains(draggedItem))return;e.currentTarget.appendChild(draggedItem);el.classList.remove('drag-over')})})}function check(){if(document.getElementById('case').children.length-1===parts.length){alert('Bravo, vous avez assemblé le PC !')}else{alert('Il manque des composants !')}init()}document.getElementById('check-btn').addEventListener('click',check);init();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_technology" },
    // --- ESPAGNOL (1 + 3 = 4) ---
    { nameKey: "game_spanish_palabra_rapida_name", descriptionKey: "game_spanish_vocab_desc", html: `<!DOCTYPE html><html><head><title>Palabra Rápida</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ea580c}.dark h1{color:#fb923c}#card{width:100%;max-width:350px;height:180px;perspective:1000px;margin:20px 0;cursor:pointer;}#card-inner{position:relative;width:100%;height:100%;transition:transform 0.6s;transform-style:preserve-3d;}.card-face{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;justify-content:center;align-items:center;font-size:1.8em;font-weight:bold;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.front{background:#ffedd5;color:#9a3412}.dark .front{background:#7c2d12;color:#fed7aa}.back{background:#fed7aa;color:#9a3412;transform:rotateY(180deg);}.dark .back{background:#9a3412;color:#fed7aa}.flipped{transform:rotateY(180deg);}</style></head><body><div class="container"><h1>Palabra Rápida</h1><p>Traduisez le mot.</p><div id="card"><div id="card-inner"><div class="card-face front"></div><div class="card-face back"></div></div></div><button id="next-btn">Suivant</button></div><script>const vocab=[{es:'Hola',fr:'Bonjour'},{es:'Gracias',fr:'Merci'},{es:'Casa',fr:'Maison'},{es:'Libro',fr:'Livre'}];let current=0;const card=document.getElementById('card'),cardInner=document.getElementById('card-inner');function showCard(){cardInner.classList.remove('flipped');setTimeout(()=>{document.querySelector('.front').textContent=vocab[current].es;document.querySelector('.back').textContent=vocab[current].fr},300)}card.addEventListener('click',()=>cardInner.classList.toggle('flipped'));document.getElementById('next-btn').addEventListener('click',()=>{current=(current+1)%vocab.length;showCard()});showCard();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_spanish" },
    { nameKey: "game_spanish_conjugador_name", descriptionKey: "game_spanish_conjugador_desc", html: `<!DOCTYPE html><html><head><title>Conjugador Rápido</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ea580c}.dark h1{color:#fb923c}button{background:#f97316}.dark button{background:#ea580c}#challenge{font-size:1.5em;margin:20px 0;}.dark #challenge{color:#ffedd5}input{border-color:#fed7aa}.dark input{border-color:#9a3412}input:focus{border-color:#f97316}.dark input:focus{border-color:#fb923c}</style></head><body><div class="container"><h1>Conjugador Rápido</h1><p>Conjuguez le verbe au présent.</p><div id="challenge"></div><div><input id="response" type="text" autocomplete="off" autocorrect="off"><button id="check-btn">Vérifier</button></div><p id="result" class="feedback"></p></div><script>const verbs=[{v:'hablar',p:'yo',r:'hablo'},{v:'comer',p:'tú',r:'comes'},{v:'vivir',p:'él',r:'vive'},{v:'ser',p:'nosotros',r:'somos'}];let current;function newChallenge(){current=verbs[Math.floor(Math.random()*verbs.length)];document.getElementById('challenge').innerText='('+current.p+') '+current.v;document.getElementById('response').value='';document.getElementById('result').innerText='';document.getElementById('response').focus()}function check(){const answer=document.getElementById('response').value.trim().toLowerCase();const resultEl=document.getElementById('result');if(answer===current.r){resultEl.innerText='¡Correcto!';resultEl.className='feedback correct'}else{resultEl.innerText='Faux. La réponse est: '+current.r;resultEl.className='feedback incorrect'}setTimeout(newChallenge,2000);}document.getElementById('response').addEventListener('keyup', e => { if (e.key === 'Enter') check(); });document.getElementById('check-btn').addEventListener('click',check);newChallenge();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_spanish" },
    { nameKey: "game_spanish_serestar_name", descriptionKey: "game_spanish_serestar_desc", html: `<!DOCTYPE html><html><head><title>Ser vs. Estar</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ea580c}.dark h1{color:#fb923c}#sentence{font-size:1.3em;margin:20px 0;}#options button{margin:5px;padding:10px 20px;background:#fed7aa;color:#9a3412}.dark #options button{background:#9a3412;color:#fed7aa}</style></head><body><div class="container"><h1>Ser vs. Estar</h1><p>Choisissez le bon verbe.</p><p id="sentence"></p><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:'Yo ___ alto.',c:'soy'},{s:'La sopa ___ fría.',c:'está'},{s:'Ella ___ mi hermana.',c:'es'},{s:'Nosotros ___ en casa.',c:'estamos'}];let current;function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];document.getElementById('sentence').textContent=current.s.replace('___','...');const optsEl=document.getElementById('options');const options=['soy','es','estoy','está','somos','estamos'].filter(v=>current.c.startsWith(v.slice(0,2))).filter((v,i,a)=>a.indexOf(v)===i);optsEl.innerHTML='<button onclick="check(\\'ser\\')">Ser</button><button onclick="check(\\'estar\\')">Estar</button>';document.getElementById('feedback').textContent=''}function check(answer){const correctType=current.c.startsWith('s')?'ser':'estar';const feedbackEl=document.getElementById('feedback');if(answer===correctType){feedbackEl.textContent='¡Correcto! La phrase est: '+current.s.replace('___',current.c);feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux. Essayez encore !';feedbackEl.className='feedback incorrect'}if(answer===correctType)setTimeout(newSentence,2500)}newSentence();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_spanish" },
    // --- ARTS (2 + 2 = 4) ---
    { nameKey: "game_arts_gallery_of_time_name", descriptionKey: "game_arts_movements_desc", html: `<!DOCTYPE html><html><head><title>Galerie du Temps</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#db2777}.dark h1{color:#f9a8d4}#description{font-style:italic;margin:20px auto;max-width:500px}#options button{display:block;width:100%;max-width:300px;margin:10px auto;padding:12px;background:#fce7f3;color:#831843;border-radius:10px}.dark #options button{background:#500724;color:#fbcfe8}.correct{background:#ecfccb !important}.dark .correct{background:#4d7c0f !important}.incorrect{background:#fee2e2 !important}.dark .incorrect{background:#f87171 !important}</style></head><body><div class="container"><h1>Galerie du Temps</h1><p>À quel mouvement artistique cette description correspond-elle ?</p><p id="description"></p><div id="options"></div></div><script>const movements=[{name:'Impressionnisme',desc:'Focus sur la lumière et les impressions fugitives.'},{name:'Cubisme',desc:'Formes géométriques et perspectives multiples.'},{name:'Surréalisme',desc:"Explore le rêve et l'inconscient."}];let current;function newQuestion(){current=movements[Math.floor(Math.random()*movements.length)];document.getElementById('description').textContent='"'+current.desc+'"';const opts=[...movements.map(m=>m.name)].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=e=>check(opt,e.target);optsEl.appendChild(btn)})}function check(answer,btn){document.querySelectorAll('button').forEach(b=>b.disabled=true);if(answer===current.name){btn.classList.add('correct')}else{btn.classList.add('incorrect')}setTimeout(newQuestion,2000)}newQuestion();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_arts" },
    { nameKey: "game_arts_colorist_name", descriptionKey: "game_arts_color_mix_desc", html: `<!DOCTYPE html><html><head><title>Le Coloriste</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#db2777}.dark h1{color:#f9a8d4}.color-patch{width:50px;height:50px;border-radius:50%;display:inline-block;margin:0 10px}.plus{font-size:2em;vertical-align:middle;margin:0 10px}.result-box{width:60px;height:60px;border:2px dashed #fda4af;margin:20px auto;display:flex;justify-content:center;align-items:center;font-size:2em;}.dark .result-box{border-color:#831843}</style></head><body><div class="container"><h1>Le Coloriste</h1><p>Que donne ce mélange ?</p><div><span id="c1" class="color-patch"></span><span class="plus">+</span><span id="c2" class="color-patch"></span></div><div id="result-box">?</div><div id="options"></div></div><script>const mixes=[{c1:'red',c2:'yellow',r:'orange'},{c1:'blue',c2:'yellow',r:'green'},{c1:'red',c2:'blue',r:'purple'}];const allColors=['orange','green','purple','red','yellow','blue'];let current;function newMix(){current=mixes[Math.floor(Math.random()*mixes.length)];document.getElementById('c1').style.background=current.c1;document.getElementById('c2').style.background=current.c2;document.getElementById('result-box').innerHTML='?';const opts=[...allColors.filter(c=>c!==current.r).sort(()=>.5-Math.random()).slice(0,3),current.r].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.style.background=opt;btn.style.width='50px';btn.style.height='50px';btn.style.borderRadius='10px';btn.style.margin='5px';btn.onclick=()=>check(opt);optsEl.appendChild(btn)})}function check(answer){if(answer===current.r){document.getElementById('result-box').innerHTML='✅';setTimeout(newMix,1000)}else{document.getElementById('result-box').innerHTML='❌'}}newMix();</script></body></html>`, subjectNameKey: "subject_arts" },
    { nameKey: "game_arts_chrono_art_name", descriptionKey: "game_arts_chrono_art_desc", html: `<!DOCTYPE html><html><head><title>Chron'Art</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#db2777}.dark h1{color:#f9a8d4}button{background:#ec4899}.dark button{background:#db2777}#timeline,#artworks{list-style:none;padding:10px;margin:10px;min-height:50px;border:2px dashed #f9a8d4;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}.dark #timeline,.dark #artworks{border-color:#831843}li{padding:10px 15px;background:#fce7f3;border-radius:8px;cursor:grab;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.1);color:#831843}.dark li{background:#500724;color:#fbcfe8}.drag-over{border-color:#ec4899;background:rgba(236,72,153,0.05);}.dark .drag-over{border-color:#f9a8d4;background:rgba(249,168,212,0.05)}</style></head><body><div class="container"><h1>Chron'Art</h1><p>Remettez ces œuvres dans l'ordre chronologique.</p><ul id="timeline"></ul><hr style="margin:20px 0;"><p>Œuvres à placer :</p><ul id="artworks"></ul><button id="check-btn">Vérifier</button></div><script>const artworksData=[{name:'La Joconde',year:1503},{name:'La Nuit étoilée',year:1889},{name:'Guernica',year:1937},{name:'La Naissance de Vénus',year:1486}];let draggedItem=null;function init(){document.getElementById('timeline').innerHTML='';const artworksContainer=document.getElementById('artworks');artworksContainer.innerHTML='';artworksData.sort(()=>.5-Math.random()).forEach(item=>{const li=document.createElement('li');li.textContent=item.name;li.dataset.year=item.year;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target});artworksContainer.appendChild(li)});['timeline','artworks'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();e.currentTarget.appendChild(draggedItem);el.classList.remove('drag-over')})})}function checkOrder(){const items=Array.from(document.querySelectorAll('#timeline li'));if(items.length<artworksData.length){alert('Veuillez placer toutes les œuvres.');return}const years=items.map(li=>parseInt(li.dataset.year));const sortedYears=[...years].sort((a,b)=>a-b);if(JSON.stringify(years)===JSON.stringify(sortedYears)){alert("Bravo ! L'ordre est correct !")}else{alert('Incorrect. Essayez encore !')}}document.getElementById('check-btn').addEventListener('click',checkOrder);init();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_arts" },
    { nameKey: "game_arts_palette_perfect_name", descriptionKey: "game_arts_palette_perfect_desc", html: `<!DOCTYPE html><html><head><title>Palette Parfaite</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#db2777}.dark h1{color:#f9a8d4}#question{font-size:1.2em}#color-swatch{width:100px;height:100px;margin:15px auto;border-radius:15px;border:4px solid white;box-shadow:0 0 10px rgba(0,0,0,0.2)}.options button{display:block;width:100%;max-width:300px;margin:8px auto;padding:10px;background:#fce7f3;color:#831843;border-radius:10px;}.dark .options button{background:#500724;color:#fbcfe8}</style></head><body><div class="container"><h1>Palette Parfaite</h1><p id="question"></p><div id="color-swatch"></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const questions=[{q:'Cette couleur est-elle primaire, secondaire ou tertiaire ?',color:'#FF0000',c:'Primaire',o:['Secondaire','Tertiaire']},{q:'Cette couleur est-elle chaude ou froide ?',color:'#0000FF',c:'Froide',o:['Chaude']},{q:'Quelle couleur obtient-on en mélangeant le rouge et le bleu ?',color:'#800080',c:'Violet',o:['Vert','Orange']}];let current;function newQuestion(){current=questions[Math.floor(Math.random()*questions.length)];document.getElementById('question').textContent=current.q;document.getElementById('color-swatch').style.backgroundColor=current.color;const opts=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=()=>check(opt);optsEl.appendChild(btn)});document.getElementById('feedback').textContent=''}function check(answer){const feedbackEl=document.getElementById('feedback');document.querySelectorAll('button').forEach(b=>b.disabled=true);if(answer===current.c){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux. La réponse était '+current.c;feedbackEl.className='feedback incorrect'}setTimeout(newQuestion,2000)}newQuestion();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_arts" },
    // --- ALLEMAND (0 + 2 = 2) ---
    { nameKey: "game_german_derdiedas_name", descriptionKey: "game_german_derdiedas_desc", html: `<!DOCTYPE html><html><head><title>Der Die Das</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#f59e0b}.dark h1{color:#fbbf24}#word{font-size:2.5em;font-weight:700;margin:20px 0}#options button{margin:5px;width:100px;padding:15px;background:#fcd34d;color:#78350f;font-size:1.2em}.dark #options button{background:#78350f;color:#fef3c7}</style></head><body><div class="container"><h1>Der Die Das</h1><p>Quel est le bon article ?</p><div id="word"></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const words=[{w:'Hund',a:'der'},{w:'Katze',a:'die'},{w:'Buch',a:'das'},{w:'Apfel',a:'der'}];let current;function newWord(){current=words[Math.floor(Math.random()*words.length)];document.getElementById('word').textContent=current.w;const optsEl=document.getElementById('options');optsEl.innerHTML='<button>der</button><button>die</button><button>das</button>';optsEl.querySelectorAll('button').forEach(btn=>{btn.onclick=()=>check(btn.textContent)});document.getElementById('feedback').textContent=''}function check(answer){const feedbackEl=document.getElementById('feedback');document.querySelectorAll('button').forEach(b=>b.disabled=true);if(answer===current.a){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux. C\\'était '+current.a;feedbackEl.className='feedback incorrect'}setTimeout(newWord,1500)}newWord();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_german" },
    { nameKey: "game_german_wortblitz_name", descriptionKey: "game_german_wortblitz_desc", html: `<!DOCTYPE html><html><head><title>Wortblitz</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#f59e0b}.dark h1{color:#fbbf24}button{background:#fbbf24}.dark button{background:#d97706}#card{width:100%;max-width:350px;height:180px;perspective:1000px;margin:20px 0;cursor:pointer;}#card-inner{position:relative;width:100%;height:100%;transition:transform 0.6s;transform-style:preserve-3d;}.card-face{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;justify-content:center;align-items:center;font-size:1.8em;font-weight:bold;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.front{background:#fef3c7;color:#78350f}.dark .front{background:#422006;color:#fef9c3}.back{background:#fde68a;color:#78350f;transform:rotateY(180deg);}.dark .back{background:#78350f;color:#fef9c3}.flipped{transform:rotateY(180deg);}</style></head><body><div class="container"><h1>Wortblitz</h1><p>Retournez la carte pour voir la traduction.</p><div id="card"><div id="card-inner"><div class="card-face front"></div><div class="card-face back"></div></div></div><button id="next-btn">Suivant</button></div><script>const vocab=[{de:'Haus',fr:'Maison'},{de:'Auto',fr:'Voiture'},{de:'Apfel',fr:'Pomme'},{de:'Buch',fr:'Livre'}];let current=0;const card=document.getElementById('card'),cardInner=document.getElementById('card-inner');function showCard(){cardInner.classList.remove('flipped');setTimeout(()=>{document.querySelector('.front').textContent=vocab[current].de;document.querySelector('.back').textContent=vocab[current].fr},300)}card.addEventListener('click',()=>cardInner.classList.toggle('flipped'));document.getElementById('next-btn').addEventListener('click',()=>{current=(current+1)%vocab.length;showCard()});showCard();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_german" },
    // --- MUSIQUE (0 + 2 = 2) ---
    { nameKey: "game_music_rhythmo_tap_name", descriptionKey: "game_music_rhythmo_tap_desc", html: `<!DOCTYPE html><html><head><title>Rythmo-Tap</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#6366f1}.dark h1{color:#a5b4fc}#track{position:relative;width:300px;height:400px;background:#e0e7ff;border:2px solid #a5b4fc;margin:20px auto;overflow:hidden}.dark #track{background:#312e81;border-color:#4f46e5}.note{position:absolute;width:50px;height:20px;background:#6366f1;border-radius:5px;animation:fall 3s linear}.target{position:absolute;bottom:10px;left:0;right:0;height:30px;background:rgba(99,102,241,0.3);border-top:3px solid #4f46e5}@keyframes fall{from{top:-20px}to{top:420px}}</style></head><body><div class="container"><h1>Rythmo-Tap</h1><p>Appuyez sur 'TAP' quand la note atteint la zone !</p><div id="track"><div class="target"></div></div><button id="tap-btn">TAP</button><p>Score: <span id="score">0</span></p></div><script>let score=0;const track=document.getElementById('track'),tapBtn=document.getElementById('tap-btn'),scoreEl=document.getElementById('score');function createNote(){const note=document.createElement('div');note.className='note';note.style.left=Math.random()*250+'px';track.appendChild(note);note.addEventListener('animationend',()=>note.remove())}function tap(){const notes=document.querySelectorAll('.note');let hit=false;notes.forEach(note=>{const rect=note.getBoundingClientRect();if(rect.top>350&&rect.top<400){score++;hit=true;note.remove()}});if(!hit&&score>0)score--;scoreEl.textContent=score}tapBtn.addEventListener('click',tap);setInterval(createNote,1500);if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_music" },
    { nameKey: "game_music_note_quizz_name", descriptionKey: "game_music_note_quizz_desc", html: `<!DOCTYPE html><html><head><title>Nomme la Note</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#6366f1}.dark h1{color:#a5b4fc}#staff{position:relative;width:250px;height:100px;margin:20px auto;}.line{width:100%;height:2px;background:#4f46e5;margin:10px 0}.dark .line{background:#a5b4fc}.note{position:absolute;width:18px;height:18px;border-radius:50%;background:#312e81;left:45%}.dark .note{background:#c7d2fe}#options button{margin:5px;background:#c7d2fe;color:#312e81}.dark #options button{background:#312e81;color:#c7d2fe}</style></head><body><div class="container"><h1>Nomme la Note</h1><p>Quelle est cette note ? (Clé de Sol)</p><div id="staff"><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div id="note" class="note"></div></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const notes=[{name:'Mi',pos:82},{name:'Sol',pos:62},{name:'Si',pos:42},{name:'Ré',pos:22},{name:'Fa',pos:2}];let current;function newNote(){current=notes[Math.floor(Math.random()*notes.length)];document.getElementById('note').style.top=current.pos+'px';const opts=[...notes.map(n=>n.name).filter(n=>n!==current.name).sort(()=>.5-Math.random()).slice(0,3),current.name].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=()=>check(opt);optsEl.appendChild(btn)});document.getElementById('feedback').textContent=''}function check(answer){document.querySelectorAll('button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(answer===current.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux. C\\'était '+current.name;feedbackEl.className='feedback incorrect'}setTimeout(newNote,1500)}newNote();if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches)document.body.classList.add('dark');</script></body></html>`, subjectNameKey: "subject_music" },
];
// FIX: Added missing exports for AVATAR_ICONS and AVATAR_ICON_KEYS
export const AVATAR_ICONS: Record<string, React.ReactElement<{ className?: string }>> = {
    'user': <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>,
    'folder': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 7V5a2 2 0 0 1 2-2h5l2 2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2-2H6a2 2 0 0 1-2-2v-9"/></svg>,
    'book': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
    'lightbulb': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18h6M10 22h4M12 2a5 5 0 0 1 5 5c0 2-2 4-2 4H9s-2-2-2-4a5 5 0 0 1 5-5z"/></svg>,
    'flask': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 3h6M12 3v7l-3 7h12l-3-7V3M6 17h16"/></svg>,
    'globe': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15 15 0 1 1 0 20 15 15 0 0 1 0-20"/></svg>,
    'graduation-cap': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 2 4 3 6 3s6-1 6-3v-5"/></svg>,
    'terminal': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 17l6-6-6-6M12 19h8"/></svg>,
    'brain': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2a5 5 0 0 0-5 5v1a5 5 0 0 0 10 0V7a5 5 0 0 0-5-5zM12 12a5 5 0 0 0-5 5v1a5 5 0 0 0 10 0v-1a5 5 0 0 0-5-5zM4 12a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1M20 12a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1"/></svg>,
    'atom': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.4-2.4 2.4-6.3 0-8.7s-6.3-2.4-8.7 0-2.4 6.3 0 8.7 6.3 2.4 8.7 0z"/><path d="M3.8 3.8c-2.4 2.4-2.4 6.3 0 8.7s6.3 2.4 8.7 0 2.4-6.3 0-8.7-6.3-2.4-8.7 0z"/></svg>,
    'dna': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 4c0 4 4 4 4 8s-4 4-4 8M20 4c0 4-4 4-4 8s4 4 4 8M8 8h8M8 16h8"/></svg>,
    'scroll': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 21h8a2 2 0 0 0 2-2v-2H6v2a2 2 0 0 0 2 2z"/><path d="M4 3h12a2 2 0 0 1 2 2v12H4V5a2 2 0 0 1 2-2zM16 3v18"/></svg>,
    'map': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 6v16l7-4 8 4 7-4V2l-7 4-8-4z"/><path d="M8 2v16M16 6v16"/></svg>,
    'palette': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><path d="M7 7c2-2 5-2 7 0M7 17c2 2 5 2 7 0"/></svg>,
    'music': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>,
    'chart-bar': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 3v18h18"/><path d="M7 12h4m-4 4h9m-9-8h2"/></svg>,
    'check': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M20 6L9 17l-5-5"/></svg>,
    'pin': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
    'star': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>,
    'camera': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" /><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" /></svg>,
    'code-bracket': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" /></svg>,
    'heart': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>,
    'bolt': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>,
    'sun': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>,
    'rocket': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 11.5L12 2l7.5 9.5-7.5 9.5zM12 22V2"/></svg>,
    'sparkles': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8 L19.25 5.25 L22 4 L19.25 2.75 L18 0 L16.75 2.75 L14 4 L16.75 5.25 Z M10 22 L11.25 19.25 L14 18 L11.25 16.75 L10 14 L8.75 16.75 L6 18 L8.75 19.25 Z M18 22 L16.75 19.25 L14 18 L16.75 16.75 L18 14 L19.25 16.75 L22 18 L19.25 19.25 Z M4 8 L2.75 5.25 L0 4 L2.75 2.75 L4 0 L5.25 2.75 L8 4 L5.25 5.25 Z"/></svg>,
    'cog': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.424.35.534.954.26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.213-1.28Z" /><path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>,
    'trophy': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 18.75h-9a9.75 9.75 0 0 0 1.373-3.852A9.75 9.75 0 0 0 4.5 6.75c0-2.432 1.255-4.596 3.168-5.832A9.753 9.753 0 0 1 12 3c2.09 0 4.028.623 5.682 1.668C19.595 5.904 21 8.068 21 10.5c0 2.236-1.005 4.21-2.627 5.648A9.75 9.75 0 0 0 16.5 18.75z" /><path strokeLinecap="round" strokeLinejoin="round" d="M12 15v3.75m0 0h3.75m-3.75 0H8.25" /></svg>,
};
export const AVATAR_ICON_KEYS = Object.keys(AVATAR_ICONS);
