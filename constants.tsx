import React from 'react';
import type { Subject, PremadeGame } from './types';

export const SUBJECTS: Subject[] = [
  {
    nameKey: "subject_french",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"/></svg>,
    color: "text-blue-500 dark:text-blue-300",
    bgColor: "bg-blue-500/20",
  },
  {
    nameKey: "subject_maths",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="8" y1="6" x2="16" y2="6"></line><line x1="16" y1="14" x2="16" y2="18"></line><line x1="12" y1="10" x2="12" y2="18"></line><line x1="8" y1="10" x2="8" y2="18"></line><line x1="8" y1="14" x2="12" y2="14"></line></svg>,
    color: "text-red-500 dark:text-red-300",
    bgColor: "bg-red-500/20",
  },
  {
    nameKey: "subject_history",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>,
    color: "text-yellow-500 dark:text-yellow-300",
    bgColor: "bg-yellow-500/20",
  },
   {
    nameKey: "subject_english",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/></svg>,
    color: "text-purple-500 dark:text-purple-300",
    bgColor: "bg-purple-500/20",
  },
  {
    nameKey: "subject_spanish",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="5" r="1"/><path d="M12 8v5"/><path d="M15.5 11.5L18 13l-3.5 1.5"/><path d="M8.5 11.5L6 13l3.5 1.5"/><path d="M12 13v5l-3 3"/><path d="M15 21l-3-3"/></svg>,
    color: "text-orange-500 dark:text-orange-300",
    bgColor: "bg-orange-500/20",
  },
   {
    nameKey: "subject_german",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
            <rect x="3" y="5" width="18" height="14" rx="1" ry="1"></rect>
            <line x1="3" y1="9.67" x2="21" y2="9.67"></line>
            <line x1="3" y1="14.33" x2="21" y2="14.33"></line>
          </svg>,
    color: "text-amber-500 dark:text-amber-300",
    bgColor: "bg-amber-500/20",
  },
  {
    nameKey: "subject_svt",
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <circle cx="12" cy="9" r="5" />
        <path d="M12 14v8" />
        <path d="M9 19h6" />
        <path d="M15.5 5.5L20 1" />
        <path d="M20 5V1h-4" />
      </svg>
    ),
    color: "text-green-500 dark:text-green-300",
    bgColor: "bg-green-500/20",
  },
  {
    nameKey: "subject_physics",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"/><path d="M6 14h12"/></svg>,
    color: "text-teal-500 dark:text-teal-300",
    bgColor: "bg-teal-500/20",
  },
  {
    nameKey: "subject_technology",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>,
    color: "text-slate-500 dark:text-slate-300",
    bgColor: "bg-slate-500/20",
  },
   {
    nameKey: "subject_arts",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>,
    color: "text-pink-500 dark:text-pink-300",
    bgColor: "bg-pink-500/20",
  },
  {
    nameKey: "subject_music",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>,
    color: "text-indigo-500 dark:text-indigo-300",
    bgColor: "bg-indigo-500/20",
  },
  {
    nameKey: "subject_games",
    icon: <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="6" y1="11" x2="10" y2="11"/><line x1="8" y1="9" x2="8" y2="13"/><line x1="15" y1="12" x2="15.01" y2="12"/><line x1="18" y1="10" x2="18.01" y2="10"/><path d="M17.32 5H6.68a4 4 0 0 0-4 4v6a4 4 0 0 0 4 4h10.64a4 4 0 0 0 4-4v-6a4 4 0 0 0-4-4z"/></svg>,
    color: "text-lime-500 dark:text-lime-300",
    bgColor: "bg-lime-500/20",
  }
];

const GAME_STYLES = `
    <style>
      body { font-family: 'Poppins', sans-serif; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: transparent; color: #1e293b; text-align: center; }
      .dark body { color: #e2e8f0; }
      .container { width: 95%; max-width: 800px; padding: clamp(15px, 4vw, 30px); background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px); border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
      .dark .container { background: rgba(15, 23, 42, 0.85); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
      h1 { font-size: clamp(1.5rem, 5vw, 2.2rem); font-weight: 800; margin-top: 0; margin-bottom: 15px; color: #4f46e5; }
      .dark h1 { color: #818cf8; }
      p { color: #475569; margin-bottom: 20px; font-size: clamp(0.9rem, 2.5vw, 1.1rem); }
      .dark p { color: #94a3b8; }
      button { font-size: clamp(0.9rem, 2.5vw, 1.1rem); padding: 10px 20px; border-radius: 12px; border: none; cursor: pointer; background: #4f46e5; color: white; font-weight: 600; transition: all 0.2s ease; will-change: transform; }
      .dark button { background: #6366f1; }
      button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4); }
      .dark button:hover:not(:disabled) { box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4); }
      button:disabled { background: #a5b4fc; cursor: not-allowed; }
      input { font-family: 'Poppins', sans-serif; font-size: clamp(1rem, 3vw, 1.2rem); padding: 10px; border: 2px solid #e2e8f0; border-radius: 12px; text-align: center; transition: border-color 0.2s; background: transparent; color: #1e293b; }
      .dark input { background: rgba(30, 41, 59, 0.5); border-color: #334155; color: #e2e8f0; }
      input:focus { outline: none; border-color: #4f46e5; }
      .dark input:focus { border-color: #6366f1; }
      .feedback { font-weight: bold; margin-top: 15px; height: 24px; transition: opacity 0.3s; font-size: 1.1em; }
      .feedback.correct { color: #16a34a; }
      .dark .feedback.correct { color: #4ade80; }
      .feedback.incorrect { color: #dc2626; }
      .dark .feedback.incorrect { color: #f87171; }
      .start-screen, .end-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10; padding: 20px; box-sizing: border-box; }
      .dark .start-screen, .dark .end-screen { background: rgba(15, 23, 42, 0.9); }
      .end-screen h2 { font-size: 2.5em; margin-bottom: 10px;}
      .end-screen p { font-size: 1.5em; margin-bottom: 20px;}
      .hidden { display: none; }
    </style>
    <script>
        try {
            if (window.top.document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.add('dark');
            }
        } catch (e) {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
        }
    </script>
`;

export const PREMADE_GAMES: PremadeGame[] = [
    // --- MATHS (5) ---
    {
        nameKey: "game_maths_speedster_name",
        descriptionKey: "game_maths_calc_rush_desc",
        html: `<!DOCTYPE html><html><head><title>Bolide Mathématique</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>.track{position:relative;height:120px;background:#e2e8f0;border-radius:10px;margin:20px 0;overflow:hidden;border:2px solid #cbd5e1}.dark .track{background:#334155; border-color: #475569;}.lane-markings{position:absolute;width:200%;height:100%;top:50%;transform:translateY(-50%);background:repeating-linear-gradient(90deg, transparent, transparent 15px, #a0aec0 15px, #a0aec0 30px);animation:move-track 1s linear infinite;}.car{position:absolute;width:60px;height:30px;transition:left 0.5s ease-in-out;}#player-car{bottom:20px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'%3E%3Cpath d='M10 15 L80 15 L90 25 L80 35 L10 35 L0 25 Z' fill='%234f46e5'/%3E%3Cpath d='M20 15 L70 15 L75 5 L25 5 Z' fill='%23818cf8'/%3E%3Ccircle cx='25' cy='35' r='5' fill='%231e293b'/%3E%3Ccircle cx='65' cy='35' r='5' fill='%231e293b'/%3E%3C/svg%3E");}#ai-car{top:20px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 40'%3E%3Cpath d='M10 15 L80 15 L90 25 L80 35 L10 35 L0 25 Z' fill='%23dc2626'/%3E%3Cpath d='M20 15 L70 15 L75 5 L25 5 Z' fill='%23f87171'/%3E%3Ccircle cx='25' cy='35' r='5' fill='%231e293b'/%3E%3Ccircle cx='65' cy='35' r='5' fill='%231e293b'/%3E%3C/svg%3E");}#problem{font-size:2.5em;font-weight:700;margin:20px 0;color:#1E293B;}.dark #problem{color:#e2e8f0;}@keyframes move-track{from{transform:translateX(0) translateY(-50%);}to{transform:translateX(-30px) translateY(-50%);}}</style></head><body><div class="start-screen"><h1>Bolide Mathématique</h1><p>Répondez correctement pour faire avancer votre voiture et battre l'IA !</p><button id="start-btn">Commencer !</button></div><div class="end-screen hidden"><h2>Fin de la course !</h2><p id="end-message"></p><button id="replay-btn">Rejouer</button></div><div class="container hidden"><h1>Bolide Mathématique</h1><div class="track"><div class="lane-markings"></div><div id="player-car" class="car" style="left:0;"></div><div id="ai-car" class="car" style="left:0;"></div></div><div id="problem"></div><input type="number" id="answer" disabled/></div><script>let score=0,playerPosition=0,aiPosition=0,currentProblem={a:0,b:0,answer:0},aiInterval,gameActive=false;const problemEl=document.getElementById('problem'),answerEl=document.getElementById('answer'),playerCar=document.getElementById('player-car'),aiCar=document.getElementById('ai-car'),startScreen=document.querySelector('.start-screen'),endScreen=document.querySelector('.end-screen'),endMessage=document.getElementById('end-message'),startBtn=document.getElementById('start-btn'),replayBtn=document.getElementById('replay-btn'),gameContainer=document.querySelector('.container');const QUESTIONS_TO_WIN=10;function startGame(){score=0;playerPosition=0;aiPosition=0;playerCar.style.left='0%';aiCar.style.left='0%';startScreen.classList.add('hidden');endScreen.classList.add('hidden');gameContainer.classList.remove('hidden');answerEl.value='';answerEl.disabled=false;answerEl.focus();gameActive=true;newProblem();aiInterval=setInterval(()=>{if(!gameActive)return;aiPosition+=100/QUESTIONS_TO_WIN;aiCar.style.left=aiPosition+'%';if(aiPosition>=100)endGame(false)},2500)}function newProblem(){currentProblem.a=Math.ceil(Math.random()*15)+5;currentProblem.b=Math.ceil(Math.random()*15)+5;currentProblem.answer=currentProblem.a+currentProblem.b;problemEl.textContent=currentProblem.a + ' + ' + currentProblem.b + ' = ?';}answerEl.addEventListener('keyup',function(e){if(e.key==='Enter'&&gameActive)checkAnswer()});function checkAnswer(){const userAnswer=parseInt(answerEl.value);if(!isNaN(userAnswer)&&userAnswer===currentProblem.answer){score++;playerPosition=(score/QUESTIONS_TO_WIN)*100;playerCar.style.left=playerPosition+'%';if(score>=QUESTIONS_TO_WIN)endGame(true)}answerEl.value='';if(gameActive)newProblem()}function endGame(playerWon){gameActive=false;clearInterval(aiInterval);answerEl.disabled=true;gameContainer.classList.add('hidden');endScreen.classList.remove('hidden');endMessage.textContent=playerWon?'Bravo, vous avez gagné !':'L\\'IA a gagné. Essayez encore !';}startBtn.addEventListener('click',startGame);replayBtn.addEventListener('click',startGame);</script></body></html>`,
        subjectNameKey: "subject_maths",
    },
    { nameKey: "game_maths_grid_flash_name", descriptionKey: "game_maths_tables_desc", html: `<!DOCTYPE html><html><head><title>Grille Multi-Flash</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#059669}.dark h1{color:#6ee7b7}button{background:#10b981}.dark button{background:#34d399}#grid-container{display:grid;grid-template-columns:repeat(6,1fr);gap:5px;margin:20px 0;}input{width:100%;height:40px;border-color:#a7f3d0}.dark input{border-color:#34d399}input:focus{border-color:#10b981}.dark input:focus{border-color:#6ee7b7}.header{font-weight:bold;display:flex;align-items:center;justify-content:center;height:40px;background:#d1fae5;border-radius:8px;}.dark .header{background:#064e3b; color:#a7f3d0}#timer,#score{font-size:1.2em;font-weight:bold;margin:10px;color:#047857;}.dark #timer,.dark #score{color:#6ee7b7}</style></head><body><div class="container"><h1>Grille Multi-Flash</h1><p>Complétez la grille de multiplication le plus vite possible.</p><div id="controls"><button id="start-btn">Démarrer (1 minute)</button></div><div id="stats" class="hidden"><span id="timer">Temps: 60s</span> | <span id="score">Score: 0 / 25</span></div><div id="grid-container"></div></div><script>const gridContainer=document.getElementById('grid-container'),startBtn=document.getElementById('start-btn'),timerEl=document.getElementById('timer'),scoreEl=document.getElementById('score'),statsEl=document.getElementById('stats');let inputs,timerInterval,timeLeft;function setupGrid(){gridContainer.innerHTML='';const numbers=[...Array(5)].map(()=>Math.floor(Math.random()*9)+2);const allHeaders=[...numbers,...numbers].sort(()=>Math.random()-.5);const colHeaders=allHeaders.slice(0,5);const rowHeaders=allHeaders.slice(5,10);gridContainer.appendChild(document.createElement('div'));colHeaders.forEach(h=>{const header=document.createElement('div');header.className='header';header.textContent=h;gridContainer.appendChild(header)});inputs=[];rowHeaders.forEach(r=>{const rowHeader=document.createElement('div');rowHeader.className='header';rowHeader.textContent=r;gridContainer.appendChild(rowHeader);colHeaders.forEach(c=>{const input=document.createElement('input');input.type='number';input.disabled=true;input.dataset.answer=r*c;inputs.push(input);gridContainer.appendChild(input)})})}function startGame(){timeLeft=60;inputs.forEach(i=>{i.disabled=false;i.value='';i.style.borderColor='';i.style.backgroundColor='';});startBtn.classList.add('hidden');statsEl.classList.remove('hidden');updateTimer();updateScore(0);timerInterval=setInterval(()=>{timeLeft--;updateTimer();if(timeLeft<=0)endGame()},1000)}function updateTimer(){timerEl.textContent=\`Temps: \${timeLeft}s\`;}function updateScore(correct){scoreEl.textContent=\`Score: \${correct} / 25\`;}function endGame(){clearInterval(timerInterval);let correct=0;inputs.forEach(input=>{input.disabled=true;const userAnswer=parseInt(input.value);const correctAnswer=parseInt(input.dataset.answer);if(userAnswer===correctAnswer){correct++;input.style.borderColor='#16a34a';input.style.backgroundColor='rgba(22,163,74,0.1)';}else{input.style.borderColor='#dc2626';input.style.backgroundColor='rgba(220,38,38,0.1)';if(!input.value)input.value=correctAnswer;}});updateScore(correct);startBtn.textContent='Rejouer';startBtn.classList.remove('hidden');}startBtn.addEventListener('click',()=>{setupGrid();startGame();});setupGrid();</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_geo_detective_name", descriptionKey: "game_maths_geometry_desc", html: `<!DOCTYPE html><html><head><title>Géo-Détective</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#d97706}.dark h1{color:#f59e0b}#shape-container{height:150px;margin:20px auto;display:flex;justify-content:center;align-items:center;}#options-container{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:20px;}#options-container button{background:#f59e0b;padding:15px;}.dark #options-container button{background:#d97706}.feedback.correct{color:#65a30d;}.feedback.incorrect{color:#dc2626;}</style></head><body><div class="container"><h1>Géo-Détective</h1><p>Quelle est cette forme ?</p><div id="shape-container"></div><div id="options-container"></div><p id="feedback" class="feedback"></p></div><script>const shapes=[{name:'Carré',draw:ctx=>{ctx.fillRect(25,25,100,100)}},{name:'Cercle',draw:ctx=>{ctx.beginPath();ctx.arc(75,75,50,0,2*Math.PI);ctx.fill()}},{name:'Triangle',draw:ctx=>{ctx.beginPath();ctx.moveTo(75,25);ctx.lineTo(125,125);ctx.lineTo(25,125);ctx.closePath();ctx.fill()}},{name:'Rectangle',draw:ctx=>{ctx.fillRect(25,35,100,80)}},{name:'Ovale',draw:ctx=>{ctx.beginPath();ctx.ellipse(75,75,50,35,0,0,2*Math.PI);ctx.fill()}},{name:'Losange',draw:ctx=>{ctx.beginPath();ctx.moveTo(75,25);ctx.lineTo(125,75);ctx.lineTo(75,125);ctx.lineTo(25,75);ctx.closePath();ctx.fill()}}];let currentShape,buttons;const shapeContainer=document.getElementById('shape-container'),optionsContainer=document.getElementById('options-container'),feedbackEl=document.getElementById('feedback');function nextQuestion(){feedbackEl.textContent='';currentShape=shapes[Math.floor(Math.random()*shapes.length)];const canvas=document.createElement('canvas');canvas.width=150;canvas.height=150;const ctx=canvas.getContext('2d');ctx.fillStyle=document.documentElement.classList.contains('dark')?'#f59e0b':'#ea580c';currentShape.draw(ctx);shapeContainer.innerHTML='';shapeContainer.appendChild(canvas);const options=[currentShape.name,...shapes.filter(s=>s.name!==currentShape.name).sort(()=>.5-Math.random()).slice(0,3).map(s=>s.name)].sort(()=>.5-Math.random());optionsContainer.innerHTML='';buttons=[];options.forEach(opt=>{const button=document.createElement('button');button.textContent=opt;button.onclick=()=>checkAnswer(opt);optionsContainer.appendChild(button);buttons.push(button)})}function checkAnswer(name){buttons.forEach(b=>b.disabled=true);if(name===currentShape.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';}else{feedbackEl.textContent=\`Faux, c'était un \${currentShape.name}.\`;feedbackEl.className='feedback incorrect';}setTimeout(nextQuestion,1500)}nextQuestion();</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_equation_mission_name", descriptionKey: "game_maths_equations_desc", html: `<!DOCTYPE html><html><head><title>Mission Équation</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#be185d}.dark h1{color:#f9a8d4}button{background:#db2777}.dark button{background:#e11d48}#equation{font-size:2em;font-weight:bold;margin:20px 0;}input{width:80px;border-color:#f9a8d4}.dark input{border-color:#be185d}input:focus{border-color:#db2777}.dark input:focus{border-color:#f9a8d4}#timer{font-size:1.5em;font-weight:bold;color:#be185d;margin-bottom:10px;}.dark #timer{color:#f9a8d4}#score{font-size:1.2em;}</style></head><body><div class="container"><h1>Mission Équation</h1><p>Trouvez la valeur de 'x' en 60 secondes !</p><div id="timer">Temps: 60</div><div id="equation"></div><input type="number" id="answer" placeholder="x = ?"><br><button id="check-btn">Valider</button><p id="score">Score: 0</p></div><script>const equations=[{eq:'2x + 4 = 10',sol:3},{eq:'3x - 5 = 7',sol:4},{eq:'x / 2 + 1 = 5',sol:8},{eq:'5x = 25',sol:5},{eq:'15 - 2x = 5',sol:5},{eq:'4x - 3 = 13',sol:4}];let currentEq,score=0,timeLeft=60,timer;const timerEl=document.getElementById('timer'),scoreEl=document.getElementById('score'),answerEl=document.getElementById('answer'),checkBtn=document.getElementById('check-btn');function newEquation(){currentEq=equations[Math.floor(Math.random()*equations.length)];document.getElementById('equation').textContent=currentEq.eq;}function startGame(){score=0;timeLeft=60;scoreEl.textContent='Score: 0';answerEl.value='';newEquation();timerEl.textContent='Temps: 60';answerEl.disabled=false;checkBtn.disabled=false;timer=setInterval(()=>{timeLeft--;timerEl.textContent=\`Temps: \${timeLeft}\`;if(timeLeft<=0)endGame()},1000);answerEl.focus();}function checkAnswer(){const userAnswer=parseInt(answerEl.value);if(userAnswer===currentEq.sol)score++;scoreEl.textContent=\`Score: \${score}\`;answerEl.value='';newEquation()}function endGame(){clearInterval(timer);alert(\`Temps écoulé ! Votre score : \${score}\`);answerEl.disabled=true;checkBtn.disabled=true;}answerEl.addEventListener('keyup',e=>{if(e.key==='Enter')checkAnswer()});checkBtn.addEventListener('click',checkAnswer);startGame();</script></body></html>`, subjectNameKey: "subject_maths" },
    { nameKey: "game_maths_fraction_duel_name", descriptionKey: "game_maths_fractions_desc", html: `<!DOCTYPE html><html><head><title>Duel de Fractions</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0d47a1}.dark h1{color:#90caf9}#fractions{display:flex;justify-content:center;align-items:center;margin:30px 0;gap:20px;}#fractions button{font-size:2.5em;width:120px;height:120px;border:3px solid #90caf9;border-radius:12px;background:#bbdefb;}.dark #fractions button{background:#1e3a8a; border-color:#2563eb}.fraction{display:flex;flex-direction:column;font-size:1.8em;font-weight:bold;line-height:1;}.divider{border-bottom:3px solid #0d47a1;width:50px;margin:2px auto;}.dark .divider{border-color:#90caf9}</style></head><body><div class="container"><h1>Duel de Fractions</h1><p>Cliquez sur la plus grande fraction !</p><div id="fractions"></div><div id="feedback" class="feedback"></div></div><script>let f1,f2,buttons;function newFractions(){const n1=Math.ceil(Math.random()*9),d1=Math.ceil(Math.random()*9)+1,n2=Math.ceil(Math.random()*9),d2=Math.ceil(Math.random()*9)+1;if(n1/d1===n2/d2)return newFractions();f1={n:n1,d:d1,val:n1/d1};f2={n:n2,d:d2,val:n2/d2};const fractionsEl=document.getElementById('fractions');fractionsEl.innerHTML=\`<button data-val="\${f1.val}"><div class="fraction"><span>\${f1.n}</span><div class="divider"></div><span>\${f1.d}</span></div></button><button data-val="\${f2.val}"><div class="fraction"><span>\${f2.n}</span><div class="divider"></div><span>\${f2.d}</span></div></button>\`;document.getElementById('feedback').textContent='';buttons=fractionsEl.querySelectorAll('button');buttons.forEach(b=>b.addEventListener('click',check))}function check(e){const chosenVal=parseFloat(e.currentTarget.dataset.val);const correctVal=Math.max(f1.val,f2.val);const feedbackEl=document.getElementById('feedback');if(chosenVal===correctVal){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';}else{feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect';}buttons.forEach(b=>b.disabled=true);setTimeout(newFractions,1000)}newFractions();</script></body></html>`, subjectNameKey: "subject_maths" },
    // --- FRANCAIS (5) ---
    { nameKey: "game_french_verb_master_name", descriptionKey: "game_french_conjug_desc", html: `<!DOCTYPE html><html><head><title>Le Maître du Verbe</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#7e22ce}.dark h1{color:#d8b4fe}button{background:#9333ea}.dark button{background:#a855f7}#challenge{font-size:1.5em;margin:20px 0;}input{border-color:#d8b4fe}.dark input{border-color:#a855f7}input:focus{border-color:#9333ea}.dark input:focus{border-color:#d8b4fe}</style></head><body><div class="container"><h1>Le Maître du Verbe</h1><p>Conjuguez le verbe correctement.</p><div id="challenge"></div><div><input id="response" type="text" autocomplete="off" autocorrect="off"><button id="check-btn">Vérifier</button></div><p id="result" class="feedback"></p></div><script>const verbs=[{v:'chanter',t:'présent',p:'je',r:'chante'},{v:'finir',t:'présent',p:'tu',r:'finis'},{v:'être',t:'futur',p:'il',r:'sera'},{v:'avoir',t:'passé composé',p:'j\\\'',r:'ai eu'},{v:'aller',t:'imparfait',p:'vous',r:'alliez'},{v:'prendre',t:'présent',p:'nous',r:'prenons'}];let current;function newChallenge(){current=verbs[Math.floor(Math.random()*verbs.length)];document.getElementById('challenge').innerText=\`\${current.p} (\${current.v}) - \${current.t}\`;document.getElementById('response').value='';document.getElementById('result').innerText='';document.getElementById('response').focus()}function check(){const answer=document.getElementById('response').value.trim().toLowerCase();const resultEl=document.getElementById('result');if(answer===current.r){resultEl.innerText='Correct !';resultEl.className='feedback correct';}else{resultEl.innerText=\`Faux. La réponse est: \${current.r}\`;resultEl.className='feedback incorrect';}setTimeout(newChallenge,2000);}document.getElementById('response').addEventListener('keyup', e => { if (e.key === 'Enter') check(); });document.getElementById('check-btn').addEventListener('click',check);newChallenge();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_error_tracker_name", descriptionKey: "game_french_mistake_desc", html: `<!DOCTYPE html><html><head><title>Traqueur d'Erreurs</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#004d40}.dark h1{color:#a7f3d0}#sentence span{cursor:pointer;padding:2px 5px;border-radius:5px;transition:background .2s ease-in-out;display:inline-block;margin:2px;}#sentence span:hover{background:#b2dfdb;}.dark #sentence span:hover{background:rgba(10, 10, 10, 0.3);}#sentence{font-size:1.5em;line-height:1.6;}</style></head><body><div class="container"><h1>Traqueur d'Erreurs</h1><p>Cliquez sur le mot qui contient une erreur.</p><div id="sentence"></div><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:'Les pommes sont vert',w:'vert',c:'vertes'},{s:'Il a manger une pomme',w:'manger',c:'mangé'},{s:'Elles sont aller au cinéma',w:'aller',c:'allées'},{s:'J\\'ai beaucoup de livres interessant',w:'interessant',c:'intéressants'}];let current;function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];const sentenceEl=document.getElementById('sentence');sentenceEl.innerHTML='';current.s.split(' ').forEach(word=>{const span=document.createElement('span');span.textContent=word;span.onclick=()=>check(word,span);sentenceEl.appendChild(span)});document.getElementById('feedback').textContent='';}function check(word,span){document.querySelectorAll('#sentence span').forEach(s=>s.onclick=null);if(word===current.w){document.getElementById('feedback').textContent=\`Correct ! Il fallait écrire "\${current.c}".\`;document.getElementById('feedback').className='feedback correct';span.style.backgroundColor='#a7f3d0';}else{document.getElementById('feedback').textContent='Incorrect. Essayez encore !';document.getElementById('feedback').className='feedback incorrect';span.style.backgroundColor='#fee2e2';}setTimeout(newSentence,2500);}newSentence();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_synonym_rally_name", descriptionKey: "game_french_synonymes_desc", html: `<!DOCTYPE html><html><head><title>Rallye des Synonymes</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ff6f00}.dark h1{color:#fbbf24}#word{font-size:2em;font-weight:bold;margin:20px 0;}#options button{display:block;width:100%;padding:15px;margin:10px 0;border:2px solid #ffe082;background:#fffde7;border-radius:10px;}.dark #options button{background:rgba(55, 48, 163, 0.2); border-color:#fcd34d;}.correct{background:#dcfce7 !important;border-color:#4ade80 !important;}.incorrect{background:#fee2e2 !important;border-color:#f87171 !important;}</style></head><body><div class="container"><h1>Rallye des Synonymes</h1><p>Trouvez le synonyme de :</p><div id="word"></div><div id="options"></div></div><script>const words=[{w:'grand',s:'vaste',o:['petit','rapide','froid']},{w:'voiture',s:'automobile',o:['maison','vélo','avion']},{w:'content',s:'joyeux',o:['triste','fatigué','affamé']},{w:'maison',s:'domicile',o:['école','magasin','parc']}];let current;function newWord(){current=words[Math.floor(Math.random()*words.length)];document.getElementById('word').textContent=current.w;const options=[current.s,...current.o].sort(()=>.5-Math.random());const optionsEl=document.getElementById('options');optionsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optionsEl.appendChild(btn)})}function check(opt,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);if(opt===current.s){btn.classList.add('correct');}else{btn.classList.add('incorrect');}setTimeout(newWord,1500);}newWord();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_the_tuner_name", descriptionKey: "game_french_accords_desc", html: `<!DOCTYPE html><html><head><title>L'Accordeur</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#1d4ed8}.dark h1{color:#93c5fd}button{background:#2563eb}.dark button{background:#3b82f6}#sentence-container{margin:20px 0;font-size:1.4em;line-height:1.8;}#sentence-container select{font-size:1em;padding:5px;border:2px solid #93c5fd;border-radius:8px;background:#eff6ff;font-family:inherit;}.dark #sentence-container select{background:#1e3a8a; border-color:#60a5fa; color: white;}</style></head><body><div class="container"><h1>L'Accordeur</h1><p>Choisissez la bonne forme du participe passé.</p><div id="sentence-container"></div><button id="check-btn">Vérifier</button><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:"Les fleurs qu'il a [cueillir].",o:['cueilli','cueillis','cueillies'],c:'cueillies'},{s:"La pomme que j'ai [manger] était délicieuse.",o:['mangé','mangée','mangés'],c:'mangée'},{s:"Elles se sont [laver] les mains.",o:['lavé','lavée','lavées'],c:'lavé'},{s:"Les lettres que tu as [écrire] sont belles.", o:['écrit', 'écrits', 'écrites'], c:'écrites'}];let current;const sentenceEl=document.getElementById('sentence-container'),checkBtn=document.getElementById('check-btn'),feedbackEl=document.getElementById('feedback');function newSentence(){current=sentences[Math.floor(Math.random()*sentences.length)];const [start,end]=current.s.split(/\[.*?\]/);let optionsHtml='<select id="participle"><option value="">--</option>';current.o.forEach(opt=>{optionsHtml+=\`<option value="\${opt}">\${opt}</option>\`});optionsHtml+='</select>';sentenceEl.innerHTML=\`\${start} \${optionsHtml} \${end}\`;feedbackEl.textContent='';checkBtn.disabled=false;}checkBtn.addEventListener('click',()=>{const select=document.getElementById('participle');const answer=select.value;if(answer===current.c){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';checkBtn.disabled=true;setTimeout(newSentence,1500);}else{feedbackEl.textContent='Incorrect, réessayez !';feedbackEl.className='feedback incorrect';}});newSentence();</script></body></html>`, subjectNameKey: "subject_french" },
    { nameKey: "game_french_literary_stylist_name", descriptionKey: "game_french_figures_desc", html: `<!DOCTYPE html><html><head><title>Le Styliste Littéraire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#881337}.dark h1{color:#fecdd3}#quote{font-style:italic;font-size:1.3em;margin:20px 0;padding:15px;background:#fecdd3;border-radius:10px;}.dark #quote{background:rgba(136,19,55,0.3)}#options button{display:block;width:100%;padding:12px;margin:8px 0;font-size:1.1em;border:2px solid #fda4af;background:#fff1f2;border-radius:10px;}.dark #options button{background:rgba(136,19,55,0.2); border-color:#f9a8d4}.correct{background:#dcfce7 !important; border-color:#4ade80 !important;}.incorrect{background:#fee2e2 !important; border-color:#f87171 !important;}</style></head><body><div class="container"><h1>Le Styliste Littéraire</h1><p>Identifiez la figure de style dans cette phrase :</p><div id="quote"></div><div id="options"></div></div><script>const quotes=[{q:'"Le temps, c\\'est de l\\'argent."',c:'Métaphore',o:['Comparaison','Personnification']},{q:'"Ses yeux brillaient comme des étoiles."',c:'Comparaison',o:['Métaphore','Hyperbole']},{q:'"Le vent hurlait sa colère."',c:'Personnification',o:['Comparaison','Anaphore']},{q:'"Paris ! Paris outragé ! Paris brisé ! Paris martyrisé ! mais Paris libéré !"', c:'Anaphore', o:['Hyperbole', 'Métaphore']}];let current;const quoteEl=document.getElementById('quote'),optionsEl=document.getElementById('options');function newQuote(){current=quotes[Math.floor(Math.random()*quotes.length)];quoteEl.textContent=current.q;const options=[...current.o,current.c].sort(()=>.5-Math.random());optionsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optionsEl.appendChild(btn)})}function check(opt,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);if(opt===current.c){btn.classList.add('correct');}else{btn.classList.add('incorrect');}setTimeout(newQuote,2000)}newQuote();</script></body></html>`, subjectNameKey: "subject_french" },
    // --- HISTOIRE (5) ---
    { nameKey: "game_history_chrono_duel_name", descriptionKey: "game_history_dates_desc", html: `<!DOCTYPE html><html><head><title>Chrono-Duel</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#e65100}.dark h1{color:#ffcc80}#question{font-size:1.4em;margin-bottom:20px;}#options button{display:block;width:100%;padding:12px;margin:8px 0;font-size:1.1em;border:2px solid #ffcc80;background:#fff3e0;border-radius:10px;}.dark #options button{background:rgba(230,81,0,0.2); border-color:#ffcc80}#score-board{display:flex;justify-content:space-around;font-weight:bold;margin-top:20px;font-size:1.2em;}</style></head><body><div class="container"><h1>Chrono-Duel</h1><p id="question"></p><div id="options"></div><div id="score-board"><div>Vous: <span id="player-score">0</span></div><div>IA: <span id="ai-score">0</span></div></div><p id="feedback" class="feedback"></p></div><script>const data=[{d:'1789',e:'Révolution française'},{d:'1492',e:"Découverte de l'Amérique"},{d:'1914',e:'Début 1ère GM'},{d:'476',e:"Chute de l'Empire romain d'Occident"},{d:'1945',e:'Fin de la 2nde GM'}];let playerScore=0,aiScore=0,current,buttons;function newQuestion(){current=data[Math.floor(Math.random()*data.length)];const otherEvents=data.filter(i=>i.e!==current.e).sort(()=>.5-Math.random()).slice(0,2).map(i=>i.e);const options=[current.e,...otherEvents].sort(()=>.5-Math.random());document.getElementById('question').textContent=\`Que s'est-il passé en \${current.d} ?\`;const optsEl=document.getElementById('options');optsEl.innerHTML='';buttons=[];options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=()=>check(opt===current.e);optsEl.appendChild(btn);buttons.push(btn)});document.getElementById('feedback').textContent='';}function check(isCorrect){buttons.forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(isCorrect){playerScore++;feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{aiScore++;feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect'}document.getElementById('player-score').textContent=playerScore;document.getElementById('ai-score').textContent=aiScore;if(playerScore>=5||aiScore>=5){setTimeout(()=>{alert(playerScore>aiScore?'Gagné !':'Perdu...');playerScore=0;aiScore=0;newQuestion()},100)}else{setTimeout(newQuestion,1500)}}newQuestion();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_portraits_name", descriptionKey: "game_history_personnages_desc", html: `<!DOCTYPE html><html><head><title>Portraits d'Histoire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#374151}.dark h1{color:#d1d5db}button{background:#4b5563}.dark button{background:#6b7280}#clues{list-style:none;padding:0;margin:20px 0;min-height:120px;}.clue{margin:10px 0;font-size:1.2em;opacity:0;transition:opacity .5s ease-in-out;background:#e5e7eb;padding:10px;border-radius:8px;}.dark .clue{background:#374151}input{border-color:#d1d5db}input:focus{border-color:#4b5563}</style></head><body><div class="start-screen"><h1>Portraits d'Histoire</h1><p>Devinez le personnage historique à partir des indices qui apparaissent progressivement.</p><button id="start-btn">Commencer</button></div><div class="container hidden"><h1>Portraits d'Histoire</h1><ul id="clues"></ul><div><input id="guess" placeholder="Votre réponse..."><button id="check-btn">Valider</button></div><p id="feedback" class="feedback"></p></div><script>const people=[{name:'Louis XIV',clues:['Je suis né en 1638.','On m\\'appelle le Roi-Soleil.','J\\'ai fait construire Versailles.']},{name:'Napoléon Bonaparte',clues:['Je suis né en Corse.','J\\'ai été Empereur des Français.','J\\'ai été exilé à Sainte-Hélène.']},{name:'Jeanne d\\'Arc', clues:['J\\'ai entendu des voix.','J\\'ai libéré Orléans.','J\\'ai été brûlée vive à Rouen.']}];let currentPerson,clueIndex,clueInterval;const startScreen=document.querySelector('.start-screen'),gameContainer=document.querySelector('.container'),startBtn=document.getElementById('start-btn'),guessInput=document.getElementById('guess'),checkBtn=document.getElementById('check-btn'),feedbackEl=document.getElementById('feedback');function startGame(){startScreen.classList.add('hidden');gameContainer.classList.remove('hidden');newGame()}function newGame(){currentPerson=people[Math.floor(Math.random()*people.length)];clueIndex=0;const cluesEl=document.getElementById('clues');cluesEl.innerHTML='';currentPerson.clues.forEach(clue=>{const li=document.createElement('li');li.className='clue';li.textContent=clue;cluesEl.appendChild(li)});guessInput.value='';feedbackEl.textContent='';guessInput.disabled=false;checkBtn.disabled=false;clueInterval=setInterval(revealClue,3000);revealClue()}function revealClue(){if(clueIndex<currentPerson.clues.length){document.querySelectorAll('.clue')[clueIndex].style.opacity=1;clueIndex++}else{clearInterval(clueInterval)}}function checkGuess(){const guess=guessInput.value.trim().toLowerCase();if(guess===currentPerson.name.toLowerCase()){feedbackEl.textContent='Bravo ! C\\'était bien '+currentPerson.name;feedbackEl.className='feedback correct';clearInterval(clueInterval);guessInput.disabled=true;checkBtn.disabled=true;setTimeout(newGame,2500)}else{feedbackEl.textContent='Incorrect. Essayez encore !';feedbackEl.className='feedback incorrect';guessInput.value='';guessInput.focus();}}startBtn.addEventListener('click',startGame);checkBtn.addEventListener('click',checkGuess);guessInput.addEventListener('keyup',e=>{if(e.key==='Enter')checkGuess()});</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_timeline_name", descriptionKey: "game_history_chrono_desc", html: `<!DOCTYPE html><html><head><title>Le Fil du Temps</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#1e40af}.dark h1{color:#93c5fd}button{background:#2563eb}.dark button{background:#3b82f6}#timeline,#events{list-style:none;padding:10px;margin:10px;min-height:50px;border:2px dashed #93c5fd;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}li{padding:10px 15px;background:#dbeafe;border-radius:8px;cursor:grab;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark li{background:#1e3a8a}.placeholder{opacity:0.5;background:#bfdbfe}.drag-over{border-color:#2563eb;background:rgba(37,99,235,0.05);}.dark .drag-over{border-color:#60a5fa;}</style></head><body><div class="container"><h1>Le Fil du Temps</h1><p>Remettez les événements dans l'ordre chronologique.</p><ul id="timeline"></ul><hr style="margin:20px 0;border-color:#93c5fd"><p>Événements à placer :</p><ul id="events"></ul><button id="check-btn">Vérifier</button></div><script>const eventsData=[{event:'Chute de l\\'Empire Romain',year:476},{event:'Prise de la Bastille',year:1789},{event:'Découverte de l\\'Amérique',year:1492},{event:'Fin de la 2nde GM',year:1945}];let draggedItem=null;function init(){document.getElementById('timeline').innerHTML='';const eventsContainer=document.getElementById('events');eventsContainer.innerHTML='';eventsData.sort(()=>.5-Math.random()).forEach(item=>{const li=document.createElement('li');li.textContent=item.event;li.dataset.year=item.year;li.draggable=true;li.addEventListener('dragstart',dragStart);li.addEventListener('dragend',dragEnd);eventsContainer.appendChild(li)});['timeline','events'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',dragOver);el.addEventListener('dragenter',dragEnter);el.addEventListener('dragleave',dragLeave);el.addEventListener('drop',dragDrop)})}function dragStart(e){draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)}function dragEnd(e){e.target.classList.remove('placeholder')}function dragOver(e){e.preventDefault()}function dragEnter(e){e.preventDefault();e.target.closest('ul').classList.add('drag-over')}function dragLeave(e){e.target.closest('ul').classList.remove('drag-over')}function dragDrop(e){const targetUl=e.target.closest('ul');targetUl.appendChild(draggedItem);targetUl.classList.remove('drag-over')}function checkOrder(){const items=document.querySelectorAll('#timeline li');if(items.length<eventsData.length){alert('Veuillez placer tous les événements.');return}const years=Array.from(items).map(li=>parseInt(li.dataset.year));const sortedYears=[...years].sort((a,b)=>a-b);if(JSON.stringify(years)===JSON.stringify(sortedYears)){alert('Bravo ! L\\'ordre est correct !');setTimeout(init,1000)}else{alert('Incorrect. Essayez encore !')}}document.getElementById('check-btn').addEventListener('click',checkOrder);init();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_ancient_riddles_name", descriptionKey: "game_history_civilisations_desc", html: `<!DOCTYPE html><html><head><title>Énigmes Antiques</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#d2691e}.dark h1{color:#fdb887}#question{margin:20px 0;font-size:1.2em;}#options button{width:100%;padding:10px;margin:5px 0;background:#deb887;border:none;border-radius:10px;}.dark #options button{background:rgba(222, 184, 135, 0.2);}.correct{background:#a7f3d0 !important;}.incorrect{background:#fee2e2 !important;}</style></head><body><div class="container"><h1>Énigmes Antiques</h1><p id="question"></p><div id="options"></div><p class="feedback" id="feedback"></p></div><script>const questions=[{q:'Quelle civilisation a construit les pyramides de Gizeh ?',c:'Égyptienne',o:['Romaine','Grecque','Mésopotamienne']},{q:'Où est née la démocratie ?',c:'Grèce',o:['Égypte','Rome','Perse']},{q:'Quel empire a construit le Colisée ?',c:'Romain',o:['Grec','Égyptien','Carlovingien']}];let current;function newQuestion(){current=questions[Math.floor(Math.random()*questions.length)];document.getElementById('question').textContent=current.q;const options=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)});document.getElementById('feedback').textContent='';}function check(answer,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(answer===current.c){btn.classList.add('correct');feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{btn.classList.add('incorrect');feedbackEl.textContent='Faux. La bonne réponse était '+current.c;feedbackEl.className='feedback incorrect'}setTimeout(newQuestion,2000)}newQuestion();</script></body></html>`, subjectNameKey: "subject_history" },
    { nameKey: "game_history_treasure_maps_name", descriptionKey: "game_history_explorateurs_desc", html: `<!DOCTYPE html><html><head><title>Cartes aux Trésors</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#064e3b}.dark h1{color:#6ee7b7}.container{max-width:600px}#columns{display:flex;justify-content:space-between;gap:10px}.column{width:48%;}ul{padding:0;list-style:none}li{background:#d1fae5;margin:10px 0;padding:12px;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .2s;}.dark li{background:#042f2e}.selected{border-color:#10b981;transform:scale(1.05);box-shadow:0 0 10px rgba(16,185,129,0.5)}.dark .selected{border-color:#6ee7b7}</style></head><body><div class="container"><h1>Cartes aux Trésors</h1><p>Reliez l'explorateur à sa découverte majeure.</p><div id="columns"><ul id="explorers" class="column"></ul><ul id="discoveries" class="column"></ul></div><p class="feedback" id="feedback"></p></div><script>const data={'Christophe Colomb':'Amérique','Vasco de Gama':'Route des Indes par la mer','Jacques Cartier':'Canada','Magellan':'Premier tour du monde'};let selectedExplorer=null,selectedDiscovery=null;function init(){const explorersEl=document.getElementById('explorers'),discoveriesEl=document.getElementById('discoveries');explorersEl.innerHTML='';discoveriesEl.innerHTML='';const explorers=Object.keys(data).sort(()=>.5-Math.random());const discoveries=Object.values(data).sort(()=>.5-Math.random());explorers.forEach(e=>{const li=document.createElement('li');li.textContent=e;li.dataset.name=e;li.onclick=()=>{selectItem(li,'explorer')};explorersEl.appendChild(li)});discoveries.forEach(d=>{const li=document.createElement('li');li.textContent=d;li.dataset.name=d;li.onclick=()=>{selectItem(li,'discovery')};discoveriesEl.appendChild(li)})}function selectItem(li,type){const alreadySelected=document.querySelector('.selected');if(alreadySelected)alreadySelected.classList.remove('selected');li.classList.add('selected');if(type==='explorer')selectedExplorer=li;else selectedDiscovery=li;if(selectedExplorer&&selectedDiscovery)checkMatch()}function checkMatch(){const feedbackEl=document.getElementById('feedback');if(data[selectedExplorer.dataset.name]===selectedDiscovery.dataset.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';selectedExplorer.remove();selectedDiscovery.remove();if(document.getElementById('explorers').children.length===0)setTimeout(()=>{alert('Bravo, vous avez tout trouvé !');init()},500)}else{feedbackEl.textContent='Faux, essayez encore.';feedbackEl.className='feedback incorrect';}selectedExplorer=null;selectedDiscovery=null;const allLi=document.querySelectorAll('li');setTimeout(()=>{feedbackEl.textContent='';allLi.forEach(li=>li.classList.remove('selected'))},1000)}init();</script></body></html>`, subjectNameKey: "subject_history" },
    // --- SVT (5) ---
    { nameKey: "game_svt_dr_anato_name", descriptionKey: "game_svt_body_parts_desc", html: `<!DOCTYPE html><html><head><title>Docteur Anato</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#2e8b57}.dark h1{color:#8fbc8f}#human-body{position:relative;width:300px;height:500px;margin:20px auto;}.hotspot{position:absolute;background:rgba(255,0,0,0.5);border-radius:50%;cursor:pointer;border:2px solid transparent;transition:all .2s;}.hotspot:hover{transform:scale(1.1);border-color:white;}#Tête{width:60px;height:60px;top:5%;left:40%}#Coeur{width:40px;height:40px;top:30%;left:45%}#Poumons{top:28%;left:30%;width:100px;height:60px;border-radius:30px}#Estomac{width:50px;height:50px;top:45%;left:42%}#Foie{width:60px;height:50px;top:40%;left:25%;border-radius:40% 60% 40% 60% / 70% 50% 50% 30%}</style></head><body><div class="container"><h1>Docteur Anato</h1><p>Cliquez sur : <strong id="target-organ" style="color:#2e8b57;font-size:1.2em;"></strong></p><div id="human-body"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 150 250'%3E%3Cpath fill='%23e2e8f0' d='M75 5 C 90 5 100 20 100 35 C 100 50 110 55 110 75 L 115 150 L 95 245 L 55 245 L 35 150 L 40 75 C 40 55 50 50 50 35 C 50 20 60 5 75 5 Z'/%3E%3C/svg%3E" alt="Corps humain"><div class="hotspot" id="Tête"></div><div class="hotspot" id="Coeur"></div><div class="hotspot" id="Poumons"></div><div class="hotspot" id="Estomac"></div><div class="hotspot" id="Foie"></div></div><p class="feedback" id="feedback"></p></div><script>const organs=['Tête','Coeur','Poumons','Estomac','Foie'];let currentOrgan;function newQuestion(){currentOrgan=organs[Math.floor(Math.random()*organs.length)];document.getElementById('target-organ').textContent=currentOrgan;document.getElementById('feedback').textContent=''}document.querySelectorAll('.hotspot').forEach(el=>{el.addEventListener('click',e=>{const feedbackEl=document.getElementById('feedback');if(e.target.id===currentOrgan){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';setTimeout(newQuestion,1000)}else{feedbackEl.textContent='Faux, essayez encore !';feedbackEl.className='feedback incorrect'}})});newQuestion();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_life_cycle_name", descriptionKey: "game_svt_food_chain_desc", html: `<!DOCTYPE html><html><head><title>Le Cycle de la Vie</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#38761d}.dark h1{color:#93c47d}button{background:#6aa84f}.dark button{background:#93c47d}#chain,#options{list-style:none;padding:10px;margin:10px;min-height:70px;border:2px dashed #93c47d;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}li{padding:10px 15px;background:#d9ead3;border-radius:8px;cursor:grab;font-weight:bold;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark li{background:#134e4a}.placeholder{opacity:0.5;background:#c4dfc4}.drag-over{border-color:#6aa84f;background:rgba(106,168,79,0.05);}.dark .drag-over{border-color:#93c47d}</style></head><body><div class="container"><h1>Le Cycle de la Vie</h1><p>Placez les éléments dans le bon ordre (de mangé à mangeur).</p><ul id="chain"></ul><hr style="margin:20px 0;border-color:#93c47d"><p>Éléments :</p><ul id="options"></ul><button id="check-btn">Vérifier</button></div><script>const chainData=['Feuille','Chenille','Oiseau','Renard'];let draggedItem=null;function init(){document.getElementById('chain').innerHTML='';const optionsContainer=document.getElementById('options');optionsContainer.innerHTML='';chainData.sort(()=>.5-Math.random()).forEach(item=>{const li=document.createElement('li');li.textContent=item;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});li.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));optionsContainer.appendChild(li)});['chain','options'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();e.target.closest('ul').classList.add('drag-over')});el.addEventListener('dragleave',e=>e.target.closest('ul').classList.remove('drag-over'));el.addEventListener('drop',e=>{e.target.closest('ul').appendChild(draggedItem);e.target.closest('ul').classList.remove('drag-over')})})}function checkOrder(){const items=document.querySelectorAll('#chain li');if(items.length<chainData.length){alert('Veuillez placer tous les éléments.');return}const userOrder=Array.from(items).map(li=>li.textContent);if(JSON.stringify(userOrder)===JSON.stringify(chainData)){alert('Bravo ! L\\'ordre est correct !');setTimeout(init,1000)}else{alert('Incorrect. Essayez encore !')}}document.getElementById('check-btn').addEventListener('click',checkOrder);init();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_micro_adventure_name", descriptionKey: "game_svt_cellule_desc", html: `<!DOCTYPE html><html><head><title>Micro-Aventure</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#1e90ff}.dark h1{color:#87cefa}#cell-diagram{position:relative;width:300px;height:300px;margin:20px auto}#cell-diagram .cell-body{width:100%;height:100%;background:#e0f7fa;border-radius:50%;border:5px solid #4682b4}.dark #cell-diagram .cell-body{background:#1e3a8a; border-color:#60a5fa}.hotspot{position:absolute;background:rgba(255,0,0,0.5);border-radius:50%;cursor:pointer;transition:all .2s}.hotspot:hover{transform:scale(1.2)}#Noyau{top:40%;left:40%;width:60px;height:60px;background:#ff6347}#Mitochondrie{top:20%;left:60%;width:40px;height:25px;border-radius:12px;background:#ffd700}#Vacuole{top:65%;left:25%;width:50px;height:40px;border-radius:40%;background:#87cefa}</style></head><body><div class="container"><h1>Micro-Aventure</h1><p>Cliquez sur : <strong id="target-organelle" style="color:#1e90ff;font-size:1.2em;"></strong></p><div id="cell-diagram"><div class="cell-body"></div><div id="Noyau" class="hotspot"></div><div id="Mitochondrie" class="hotspot"></div><div id="Vacuole" class="hotspot"></div></div><p class="feedback" id="feedback"></p></div><script>const organelles=['Noyau','Mitochondrie','Vacuole'];let currentOrganelle;function newQuestion(){currentOrganelle=organelles[Math.floor(Math.random()*organelles.length)];document.getElementById('target-organelle').textContent=currentOrganelle;document.getElementById('feedback').textContent=''}document.querySelectorAll('.hotspot').forEach(el=>{el.addEventListener('click',e=>{const feedbackEl=document.getElementById('feedback');if(e.target.id===currentOrganelle){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';setTimeout(newQuestion,1000)}else{feedbackEl.textContent='Faux, essayez encore !';feedbackEl.className='feedback incorrect'}})});newQuestion();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_logical_zoo_name", descriptionKey: "game_svt_animaux_desc", html: `<!DOCTYPE html><html><head><title>Le Zoo Logique</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#8c7e6a}.dark h1{color:#d4ccc0}.container{max-width:800px}#columns{display:flex;justify-content:space-around;margin-top:20px;gap:10px}.category{width:48%;min-height:200px;border:2px dashed #c0b9ab;padding:10px;border-radius:10px;transition:all .2s;}.dark .category{border-color:#78716c}.drag-over{border-color:#8c7e6a;background:rgba(140,126,106,0.05);}.dark .drag-over{border-color:#a8a29e}#animals{min-height:100px;border:2px dashed #c0b9ab;padding:10px;border-radius:10px;margin-top:10px;display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.dark #animals{border-color:#78716c}.animal{padding:10px;background:#e7e2d6;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark .animal{background:#44403c}.placeholder{opacity:0.5;background:#d4ccc0}</style></head><body><div class="container"><h1>Le Zoo Logique</h1><p>Glissez chaque animal dans la bonne catégorie.</p><div id="columns"><div id="mammals" class="category"><h3>Mammifères</h3></div><div id="reptiles" class="category"><h3>Reptiles</h3></div></div><p style="margin-top:20px;">Animaux à classer :</p><div id="animals"></div><button id="check-btn">Vérifier</button></div><script>const data={mammals:['Chat','Chien','Baleine'],reptiles:['Serpent','Lézard','Tortue']};let draggedItem=null;function init(){document.querySelectorAll('.category').forEach(c=>c.innerHTML=\`<h3>\${c.id==='mammals'?'Mammifères':'Reptiles'}</h3>\`);const animalsContainer=document.getElementById('animals');animalsContainer.innerHTML='';[...data.mammals,...data.reptiles].sort(()=>.5-Math.random()).forEach(name=>{const div=document.createElement('div');div.className='animal';div.textContent=name;div.draggable=true;div.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});div.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));animalsContainer.appendChild(div)});['mammals','reptiles','animals'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function check(){let correct=true;document.querySelectorAll('.category').forEach(cat=>{const categoryName=cat.id;Array.from(cat.children).slice(1).forEach(animalEl=>{if(!data[categoryName].includes(animalEl.textContent)){correct=false}})});alert(correct?'Bravo ! Tout est correct !':'Il y a des erreurs. Essayez encore !');init()}document.getElementById('check-btn').addEventListener('click',check);init();</script></body></html>`, subjectNameKey: "subject_svt" },
    { nameKey: "game_svt_aqua_cycle_name", descriptionKey: "game_svt_water_cycle_desc", html: `<!DOCTYPE html><html><head><title>Aqua-Cycle</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#00796b}.dark h1{color:#2dd4bf}button{background:#009688}.dark button{background:#14b8a6}#steps,#options{list-style:none;padding:10px;margin:10px;min-height:50px;border:2px dashed #b2dfdb;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px}.dark #steps,.dark #options{border-color:#5eead4}li{padding:10px;background:#e0f2f1;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark li{background:#115e59}.drag-over{border-color:#00796b;background:rgba(0,121,107,0.05);}.dark .drag-over{border-color:#2dd4bf}</style></head><body><div class="container"><h1>Aqua-Cycle</h1><p>Remettez les étapes du cycle de l'eau dans l'ordre.</p><ul id="steps"></ul><hr style="margin:20px 0;border-color:#b2dfdb"><p>Étapes :</p><ul id="options"></ul><button id="check-btn">Vérifier</button></div><script>const steps=['Évaporation','Condensation','Précipitation','Collection'];let draggedItem=null;function init(){document.getElementById('steps').innerHTML='';const optionsEl=document.getElementById('options');optionsEl.innerHTML='';steps.sort(()=>.5-Math.random()).forEach(s=>{const li=document.createElement('li');li.textContent=s;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.style.opacity='0.5',0)});li.addEventListener('dragend',e=>e.target.style.opacity='1');optionsEl.appendChild(li)});['steps','options'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function checkOrder(){const items=document.querySelectorAll('#steps li');if(items.length<steps.length){alert('Veuillez placer toutes les étapes.');return}const userOrder=Array.from(items).map(li=>li.textContent);if(JSON.stringify(userOrder)===JSON.stringify(steps)){alert('Correct !');setTimeout(init,1000)}else alert('Incorrect. Essayez encore !')}document.getElementById('check-btn').addEventListener('click',checkOrder);init();</script></body></html>`, subjectNameKey: "subject_svt" },
    // --- ANGLAIS (5) ---
    { nameKey: "game_english_word_flash_name", descriptionKey: "game_english_vocab_desc", html: `<!DOCTYPE html><html><head><title>Word Flash</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#1e40af}.dark h1{color:#93c5fd}#card{width:100%;max-width:350px;height:180px;perspective:1000px;margin:20px 0;cursor:pointer;}#card-inner{position:relative;width:100%;height:100%;transition:transform 0.6s;transform-style:preserve-3d;}.card-face{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;justify-content:center;align-items:center;font-size:1.8em;font-weight:bold;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}.front{background:#dbeafe;color:#1e3a8a}.dark .front{background:#1e3a8a; color:#dbeafe;}.back{background:#93c5fd;color:#1e3a8a;transform:rotateY(180deg);}.dark .back{background:#3b82f6; color:#eff6ff}.flipped{transform:rotateY(180deg);}</style></head><body><div class="container"><h1>Word Flash</h1><p>Retournez la carte pour voir la traduction, puis passez à la suivante.</p><div id="card"><div id="card-inner"><div class="card-face front"></div><div class="card-face back"></div></div></div><button id="next-btn">Suivant</button></div><script>const vocab=[{fr:'Maison',en:'House'},{fr:'Voiture',en:'Car'},{fr:'Pomme',en:'Apple'},{fr:'Livre',en:'Book'},{fr:'Ordinateur',en:'Computer'}];let current=0;const card=document.getElementById('card'),cardInner=document.getElementById('card-inner'),nextBtn=document.getElementById('next-btn');function showCard(){cardInner.classList.remove('flipped');setTimeout(()=>{document.querySelector('.front').textContent=vocab[current].fr;document.querySelector('.back').textContent=vocab[current].en},300)}function flip(){cardInner.classList.toggle('flipped')}function next(){current=(current+1)%vocab.length;showCard()}card.addEventListener('click',flip);nextBtn.addEventListener('click',next);showCard();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_verb_master_name", descriptionKey: "game_english_tenses_desc", html: `<!DOCTYPE html><html><head><title>Verb Master</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#ca8a04}.dark h1{color:#fde047}#verb{font-size:2em;font-weight:700;margin:20px 0}input{border-color:#fde047}.dark input{border-color:#ca8a04}input:focus{border-color:#facc15}.dark input:focus{border-color:#fde047}</style></head><body><div class="container"><h1>Verb Master</h1><p>Donnez le prétérit de :</p><div id="verb"></div><input id="answer" type="text" autocomplete="off" autocorrect="off"><p id="feedback" class="feedback"></p></div><script>const verbs=[{inf:'go',past:'went'},{inf:'be',past:'was/were'},{inf:'eat',past:'ate'},{inf:'see',past:'saw'},{inf:'take',past:'took'},{inf:'give',past:'gave'}];let current;function newVerb(){current=verbs[Math.floor(Math.random()*verbs.length)];document.getElementById('verb').textContent=current.inf;document.getElementById('answer').value='';document.getElementById('feedback').textContent='';document.getElementById('answer').focus()}document.getElementById('answer').addEventListener('keyup',e=>{if(e.key==='Enter'){const feedbackEl=document.getElementById('feedback');if(document.getElementById('answer').value.toLowerCase()===current.past){feedbackEl.textContent='Correct!';feedbackEl.className='feedback correct'}else{feedbackEl.textContent='Faux, la réponse était: '+current.past;feedbackEl.className='feedback incorrect'}setTimeout(newVerb,1500)}});newVerb();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_word_rescue_name", descriptionKey: "game_english_hangman_desc", html: `<!DOCTYPE html><html><head><title>Word Rescue</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#57534e}.dark h1{color:#d6d3d1}#word-display{font-size:2em;letter-spacing:.5em;margin:20px 0}#keyboard{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;max-width:400px;margin:20px auto}#keyboard button{font-size:1em;width:35px;height:35px;border:1px solid #d6d3d1;border-radius:5px;background:#f5f5f4}.dark #keyboard button{background:#292524; border-color:#57534e}#keyboard button:disabled{background:#e7e5e4;color:#a8a29e}.dark #keyboard button:disabled{background:#1c1917; color:#78716c}#hangman-svg{width:150px;height:180px}#hangman-svg path{transition:opacity 0.3s; stroke-width:3; fill:none;}.dark #hangman-svg path{stroke: #a8a29e}</style></head><body><div class="container"><h1>Word Rescue</h1><svg id="hangman-svg" viewBox="0 0 100 120"><path d="M 10 110 H 90" stroke="#78716c" stroke-width="4"/><path d="M 30 110 V 10 H 70 V 20" stroke="#78716c" stroke-width="4" fill="none"/><path id="head" d="M 70 30 a 10 10 0 1 1 -20 0 a 10 10 0 1 1 20 0" stroke="#44403c" style="opacity:0"/><path id="body" d="M 60 40 V 70" stroke="#44403c" style="opacity:0"/><path id="arm-l" d="M 60 50 L 45 60" stroke="#44403c" style="opacity:0"/><path id="arm-r" d="M 60 50 L 75 60" stroke="#44403c" style="opacity:0"/><path id="leg-l" d="M 60 70 L 45 90" stroke="#44403c" style="opacity:0"/><path id="leg-r" d="M 60 70 L 75 90" stroke="#44403c" style="opacity:0"/></svg><div id="word-display"></div><div id="keyboard"></div><button onclick="init()">Nouveau Mot</button></div><script>const words=['APPLE','BANANA','ORANGE','COMPUTER','DEVELOPER','LANGUAGE'];let word,guessed,mistakes;const parts=['head','body','arm-l','arm-r','leg-l','leg-r'];function init(){word=words[Math.floor(Math.random()*words.length)];guessed=new Set();mistakes=0;parts.forEach(p=>document.getElementById(p).style.opacity='0');updateWordDisplay();createKeyboard()}function updateWordDisplay(){document.getElementById('word-display').textContent=word.split('').map(l=>guessed.has(l)?l:'_').join('')}function createKeyboard(){const kb=document.getElementById('keyboard');kb.innerHTML='';for(let i=65;i<=90;i++){const l=String.fromCharCode(i);const btn=document.createElement('button');btn.textContent=l;btn.onclick=()=>handleGuess(l,btn);kb.appendChild(btn)}}function handleGuess(letter,btn){if(guessed.has(letter))return;guessed.add(letter);btn.disabled=true;if(word.includes(letter)){updateWordDisplay();if(!document.getElementById('word-display').textContent.includes('_')){setTimeout(()=>alert('Gagné! Vous avez sauvé le mot !'),100)}}else{mistakes++;document.getElementById(parts[mistakes-1]).style.opacity='1';if(mistakes>=parts.length){setTimeout(()=>alert('Perdu! Le mot était '+word),100)}}}init();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_sentence_builder_name", descriptionKey: "game_english_scramble_desc", html: `<!DOCTYPE html><html><head><title>Sentence Builder</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#312e81}.dark h1{color:#a5b4fc}button{background:#4338ca}.dark button{background:#6366f1}#answer-zone,#word-bank{list-style:none;padding:10px;margin:10px 0;min-height:50px;border:2px dashed #a5b4fc;border-radius:10px;display:flex;flex-wrap:wrap;justify-content:center;gap:10px;}li{padding:10px 15px;background:#e0e7ff;border-radius:8px;cursor:grab;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.dark li{background:#312e81}.placeholder{opacity:0.5;}.drag-over{border-color:#4338ca;background:rgba(67,56,202,0.05)}.dark .drag-over{border-color:#818cf8}</style></head><body><div class="container"><h1>Sentence Builder</h1><p>Remettez les mots dans l'ordre pour former une phrase.</p><ul id="answer-zone"></ul><p style="margin:20px 0; font-weight:bold;">Mots :</p><ul id="word-bank"></ul><button id="check-btn">Vérifier</button></div><script>const sentences=['I love to learn new things','She is reading a book in the library','The sun shines brightly in the sky'];let current,draggedItem=null;function init(){current=sentences[Math.floor(Math.random()*sentences.length)];document.getElementById('answer-zone').innerHTML='';const bank=document.getElementById('word-bank');bank.innerHTML='';current.split(' ').sort(()=>.5-Math.random()).forEach(w=>{const li=document.createElement('li');li.textContent=w;li.draggable=true;li.addEventListener('dragstart',e=>{draggedItem=e.target;setTimeout(()=>e.target.classList.add('placeholder'),0)});li.addEventListener('dragend',e=>e.target.classList.remove('placeholder'));bank.appendChild(li)});['answer-zone','word-bank'].forEach(id=>{const el=document.getElementById(id);el.addEventListener('dragover',e=>e.preventDefault());el.addEventListener('dragenter',e=>{e.preventDefault();el.classList.add('drag-over')});el.addEventListener('dragleave',e=>el.classList.remove('drag-over'));el.addEventListener('drop',e=>{e.preventDefault();el.appendChild(draggedItem);el.classList.remove('drag-over')})})}function check(){const items=document.querySelectorAll('#answer-zone li');if(items.length < current.split(' ').length){alert('Veuillez utiliser tous les mots.'); return;}const userAnswer=Array.from(items).map(li=>li.textContent).join(' ');if(userAnswer===current){alert('Correct!');setTimeout(init,500)}else alert('Faux, essayez encore !')}document.getElementById('check-btn').addEventListener('click',check);init();</script></body></html>`, subjectNameKey: "subject_english" },
    { nameKey: "game_english_preposition_puzzle_name", descriptionKey: "game_english_prepositions_desc", html: `<!DOCTYPE html><html><head><title>Preposition Puzzle</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0f766e}.dark h1{color:#5eead4}button{background:#14b8a6}.dark button{background:#2dd4bf}#sentence{font-size:1.3em;margin:20px 0;}select{font-size:1.2em;padding:5px;font-family:inherit;border-radius:8px;border-color:#5eead4;background:#ccfbf1}.dark select{background:#0f766e; color:white; border-color:#2dd4bf}</style></head><body><div class="container"><h1>Preposition Puzzle</h1><p>Complétez la phrase avec la bonne préposition.</p><div id="sentence"></div><button id="check-btn">Vérifier</button><p id="feedback" class="feedback"></p></div><script>const sentences=[{s:'The book is __ the table.',c:'on',o:['in','at']},{s:'She is waiting __ the bus stop.',c:'at',o:['on','in']},{s:'He is interested __ science.',c:'in',o:['on','at']}];let current;function init(){current=sentences[Math.floor(Math.random()*sentences.length)];const [start,end]=current.s.split('__');let optionsHtml='<select id="prep"><option value="">--</option>';[...current.o,current.c].sort(()=>.5-Math.random()).forEach(p=>{optionsHtml+=\`<option value="\${p}">\${p}</option>\`});optionsHtml+='</select>';document.getElementById('sentence').innerHTML=start+optionsHtml+end;document.getElementById('feedback').textContent='';}function check(){const feedbackEl=document.getElementById('feedback');if(document.getElementById('prep').value===current.c){feedbackEl.textContent='Correct!';feedbackEl.className='feedback correct';setTimeout(init,1500)}else{feedbackEl.textContent='Faux, essayez encore !';feedbackEl.className='feedback incorrect'}}document.getElementById('check-btn').addEventListener('click',check);init();</script></body></html>`, subjectNameKey: "subject_english" },
    // --- PHYSIQUE-CHIMIE (4) ---
    { 
      nameKey: "game_physics_symbol_alchemy_name",
      descriptionKey: "game_physics_symbols_desc",
      html: `<!DOCTYPE html><html><head><title>Alchimie des Symboles</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#0e7490}.dark h1{color:#67e8f9}button{background:#06b6d4}.dark button{background:#22d3ee}.element-name{font-size:3em;font-weight:bold;margin:20px 0;}input{width:100px;border-color:#67e8f9}.dark input{border-color:#22d3ee}input:focus{border-color:#06b6d4}.dark input:focus{border-color:#67e8f9}</style></head><body><div class="container"><h1>Alchimie des Symboles</h1><p>Quel est le symbole chimique de cet élément ?</p><div id="element-name"></div><input id="symbol-input" type="text" maxlength="2" autocomplete="off" autocorrect="off"><p id="feedback" class="feedback"></p><p>Score: <span id="score">0</span></p></div><script>const elements=[{name:'Hydrogène',symbol:'H'},{name:'Hélium',symbol:'He'},{name:'Oxygène',symbol:'O'},{name:'Fer',symbol:'Fe'},{name:'Or',symbol:'Au'},{name:'Argent',symbol:'Ag'},{name:'Carbone',symbol:'C'},{name:'Azote',symbol:'N'},{name:'Sodium',symbol:'Na'}];let currentElement,score=0;const nameEl=document.getElementById('element-name'),inputEl=document.getElementById('symbol-input'),feedbackEl=document.getElementById('feedback'),scoreEl=document.getElementById('score');function newQuestion(){currentElement=elements[Math.floor(Math.random()*elements.length)];nameEl.textContent=currentElement.name;inputEl.value='';feedbackEl.textContent='';inputEl.focus();}inputEl.addEventListener('keyup',e=>{if(e.key==='Enter'){if(inputEl.value.toLowerCase()===currentElement.symbol.toLowerCase()){score++;feedbackEl.textContent='Correct!';feedbackEl.className='feedback correct';}else{feedbackEl.textContent='Faux, c\\\'était '+currentElement.symbol;feedbackEl.className='feedback incorrect';}scoreEl.textContent=score;setTimeout(newQuestion,1200)}});newQuestion();</script></body></html>`,
      subjectNameKey: "subject_physics"
    },
    { 
      nameKey: "game_physics_formulator_name",
      descriptionKey: "game_physics_formulas_desc",
      html: `<!DOCTYPE html><html><head><title>Le Formulator</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#5b21b6}.dark h1{color:#c4b5fd}#quantity{font-size:1.5em;font-weight:bold;margin:20px 0;}#options button{display:block;width:100%;padding:10px;margin:5px 0;font-size:1.2em;background:#ede9fe;border:2px solid #ddd6fe;border-radius:8px;}.dark #options button{background:rgba(91,33,182,0.2); border-color:#a78bfa}.correct{background:#dcfce7 !important;border-color:#4ade80 !important;}.incorrect{background:#fee2e2 !important;border-color:#f87171 !important;}</style></head><body><div class="container"><h1>Le Formulator</h1><p>Quelle est la bonne formule ?</p><div id="quantity"></div><div id="options"></div></div><script>const formulas=[{q:'La vitesse',c:'v = d / t',o:['P = U x I','U = R x I']},{q:"La tension (Loi d'Ohm)",c:'U = R x I',o:['v = d / t','P = m x g']},{q:'La puissance électrique',c:'P = U x I',o:['E = m x c²','F = m x a']},{q:'Le poids', c:'P = m x g', o:['U = R x I', 'v = d / t']}];let current;function newQuestion(){current=formulas[Math.floor(Math.random()*formulas.length)];document.getElementById('quantity').textContent=current.q;const options=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)})}function check(answer,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);if(answer===current.c)btn.classList.add('correct');else btn.classList.add('incorrect');setTimeout(newQuestion,1500)}newQuestion();</script></body></html>`,
      subjectNameKey: "subject_physics"
    },
    {
      nameKey: "game_physics_unit_master_name",
      descriptionKey: "game_physics_unit_master_desc",
      html: `<!DOCTYPE html><html><head><title>Maître des Unités</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#00838f}.dark h1{color:#4dd0e1}.container{max-width:600px}#columns{display:flex;justify-content:space-around}ul{padding:0;list-style:none;min-height:200px;width:45%;}li{background:#e0f7fa;margin:10px 0;padding:12px;border-radius:8px;cursor:pointer;border:2px solid transparent;transition:all .2s}.dark li{background:#00363a}.selected{border-color:#00acc1;transform:scale(1.05)}</style></head><body><div class="container"><h1>Maître des Unités</h1><p>Associez chaque grandeur physique à son unité SI.</p><div id="columns"><ul id="quantities"></ul><ul id="units"></ul></div><p id="feedback" class="feedback"></p></div><script>const data={'Force':'Newton','Pression':'Pascal','Énergie':'Joule','Puissance':'Watt'};let selectedQ=null,selectedU=null;function init(){const qEl=document.getElementById('quantities'),uEl=document.getElementById('units');qEl.innerHTML='';uEl.innerHTML='';const quantities=Object.keys(data).sort(()=>.5-Math.random());const units=Object.values(data).sort(()=>.5-Math.random());quantities.forEach(q=>{const li=document.createElement('li');li.textContent=q;li.dataset.name=q;li.onclick=()=>select(li,'q');qEl.appendChild(li)});units.forEach(u=>{const li=document.createElement('li');li.textContent=u;li.dataset.name=u;li.onclick=()=>select(li,'u');uEl.appendChild(li)})}function select(li,type){document.querySelector(\`#\${type==='q'?'quantities':'units'} .selected\`)?.classList.remove('selected');li.classList.add('selected');if(type==='q')selectedQ=li;else selectedU=li;if(selectedQ&&selectedU)check()}function check(){const feedbackEl=document.getElementById('feedback');if(data[selectedQ.dataset.name]===selectedU.dataset.name){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';selectedQ.remove();selectedU.remove();if(!document.getElementById('quantities').children.length){alert('Bravo !');init()}}else{feedbackEl.textContent='Faux !';feedbackEl.className='feedback incorrect'}selectedQ=null;selectedU=null;setTimeout(()=>{feedbackEl.textContent='';document.querySelectorAll('.selected').forEach(s=>s.classList.remove('selected'))},1000)}init();</script></body></html>`,
      subjectNameKey: "subject_physics"
    },
    {
      nameKey: "game_physics_ph_lab_name",
      descriptionKey: "game_physics_ph_lab_desc",
      html: `<!DOCTYPE html><html><head><title>Labo pH</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#f06292}.dark h1{color:#f8bbd0}#beaker{width:150px;height:200px;border:5px solid #607d8b;border-top:none;border-radius:0 0 20px 20px;margin:20px auto;position:relative}#liquid{position:absolute;bottom:0;width:100%;height:70%;transition:background .3s}#ph-strip{width:20px;height:80px;background:#eee;border:1px solid #999;margin:10px auto;transition:background .3s}#options button{background:#ec407a;margin:5px}.dark #options button{background:#d81b60}</style></head><body><div class="container"><h1>Labo pH</h1><p>Testez le pH de ces substances.</p><div id="beaker"><div id="liquid"></div></div><div id="ph-strip"></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const substances=[{name:'Vinaigre',ph:2,color:'rgba(255,0,0,0.4)'},{name:'Eau pure',ph:7,color:'rgba(0,0,255,0.4)'},{name:'Javel',ph:13,color:'rgba(128,0,128,0.4)'}];const phColors=['#d32f2f','#ef5350','#ff7043','#ffca28','#ffee58','#d4e157','#a0d468','#4caf50','#4dd0e1','#42a5f5','#5c6bc0','#7e57c2','#ab47bc','#d05ce3'];const optionsEl=document.getElementById('options');substances.forEach(s=>{const btn=document.createElement('button');btn.textContent=s.name;btn.onclick=()=>test(s);optionsEl.appendChild(btn)});function test(substance){document.getElementById('liquid').style.background=substance.color;document.getElementById('ph-strip').style.background=phColors[Math.round(substance.ph)];const type=substance.ph<7?'Acide':substance.ph>7?'Basique':'Neutre';document.getElementById('feedback').textContent=\`Le \${substance.name} est \${type}.\`}test(substances[1]);</script></body></html>`,
      subjectNameKey: "subject_physics"
    },
    // --- NOUVEAUX JEUX (AJOUTÉS) ---
    {
      nameKey: "game_tech_binary_coder_name",
      descriptionKey: "game_tech_logic_gates_desc",
      html: `<!DOCTYPE html><html><head><title>Code Binaire</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#57534e}.dark h1{color:#a8a29e}button{background:#78716c}.dark button{background:#a8a29e}#problem{font-size:2.5em;font-weight:700;margin:20px 0}input{width:150px;letter-spacing:2px;border-color:#a8a29e}.dark input{border-color:#78716c}input:focus{border-color:#78716c}.dark input:focus{border-color:#a8a29e}</style></head><body><div class="container"><h1>Code Binaire</h1><p>Convertis ce nombre en binaire.</p><div id="problem"></div><input id="answer" type="text"><p id="feedback" class="feedback"></p><p>Score: <span id="score">0</span></p></div><script>let currentDecimal,score=0;const problemEl=document.getElementById('problem'),answerEl=document.getElementById('answer'),feedbackEl=document.getElementById('feedback'),scoreEl=document.getElementById('score');function newProblem(){currentDecimal=Math.floor(Math.random()*30)+1;problemEl.textContent=currentDecimal;answerEl.value='';feedbackEl.textContent='';answerEl.focus()}function checkAnswer(){const userAnswer=answerEl.value.trim();const correctAnswer=currentDecimal.toString(2);if(userAnswer===correctAnswer){score++;feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct'}else{feedbackEl.textContent=\`Faux. La réponse était \${correctAnswer}\`;feedbackEl.className='feedback incorrect'}scoreEl.textContent=score;setTimeout(newProblem,1500)}answerEl.addEventListener('keyup',e=>{if(e.key==='Enter')checkAnswer()});newProblem();</script></body></html>`,
      subjectNameKey: "subject_technology"
    },
    {
      nameKey: "game_tech_pc_builder_name",
      descriptionKey: "game_tech_pc_builder_desc",
      html: `<!DOCTYPE html><html><head><title>PC Builder</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#455a64}.dark h1{color:#b0bec5}#case{width:300px;height:400px;border:4px solid #37474f;border-radius:10px;margin:20px auto;position:relative;background:#cfd8dc}.dark #case{background:#263238; border-color:#546e7a}#components,#slots{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:20px}.component{padding:10px;background:#90a4ae;border-radius:8px;cursor:grab}.dark .component{background:#455a64}.slot{width:100px;height:50px;border:2px dashed #546e7a;display:flex;align-items:center;justify-content:center;font-size:0.8em;color:#546e7a}.dark .slot{border-color:#78909c; color:#90a4ae}.drag-over{border-style:solid}</style></head><body><div class="container"><h1>PC Builder</h1><p>Glissez les composants dans le boîtier !</p><div id="case"></div><div id="components"></div><button onclick="check()">Vérifier</button></div><script>const components=['CPU','RAM','GPU','SSD'];let dragged;function init(){const compEl=document.getElementById('components');compEl.innerHTML='';components.sort(()=>.5-Math.random()).forEach(c=>{const div=document.createElement('div');div.className='component';div.textContent=c;div.draggable=true;div.dataset.name=c;compEl.appendChild(div)});const caseEl=document.getElementById('case');caseEl.innerHTML='';components.forEach(c=>{const slot=document.createElement('div');slot.className='slot';slot.textContent=c+' Slot';slot.dataset.target=c;caseEl.appendChild(slot)});document.addEventListener('dragstart',e=>{dragged=e.target});document.addEventListener('dragover',e=>e.preventDefault());document.querySelectorAll('.slot').forEach(s=>{s.addEventListener('dragenter',e=>e.target.classList.add('drag-over'));s.addEventListener('dragleave',e=>e.target.classList.remove('drag-over'));s.addEventListener('drop',e=>{e.preventDefault();e.target.classList.remove('drag-over');if(e.target.dataset.target===dragged.dataset.name){e.target.appendChild(dragged);e.target.style.borderColor='green'}})});document.getElementById('components').addEventListener('drop',e=>{e.preventDefault();e.target.appendChild(dragged)})}function check(){if(document.getElementById('case').children.length===components.length*2)alert('Bravo !');else alert('Pas encore !')}init()</script></body></html>`,
      subjectNameKey: "subject_technology"
    },
    {
      nameKey: "game_spanish_palabra_rapida_name",
      descriptionKey: "game_spanish_vocab_desc",
      html: `<!DOCTYPE html><html><head><title>Palabra Rápida</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#e67e22}.dark h1{color:#f39c12}#word{font-size:2.5em;font-weight:bold;margin:20px 0}#options button{display:block;width:100%;padding:15px;margin:10px 0;border:2px solid #f39c12;background:#fffaf0;border-radius:10px;}.dark #options button{background:rgba(230,126,34,0.2); border-color:#f39c12}.correct{background:#dcfce7 !important;border-color:#4ade80 !important;}.incorrect{background:#fee2e2 !important;border-color:#f87171 !important;}</style></head><body><div class="container"><h1>Palabra Rápida</h1><p>Quelle est la traduction française de :</p><div id="word"></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const vocab=[{es:'Manzana',fr:'Pomme',o:['Poire','Banane','Orange']},{es:'Perro',fr:'Chien',o:['Chat','Souris','Poisson']},{es:'Libro',fr:'Livre',o:['Stylo','Cahier','Tableau']},{es:'Agua', fr:'Eau', o:['Feu','Terre','Air']}];let current;function newWord(){current=vocab[Math.floor(Math.random()*vocab.length)];document.getElementById('word').textContent=current.es;const options=[...current.o,current.fr].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';options.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)});document.getElementById('feedback').textContent=''}function check(ans,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(ans===current.fr){feedbackEl.textContent='Correcto !';feedbackEl.className='feedback correct';btn.classList.add('correct')}else{feedbackEl.textContent='Faux. La réponse était: '+current.fr;feedbackEl.className='feedback incorrect';btn.classList.add('incorrect')}setTimeout(newWord,1500)}newWord();</script></body></html>`,
      subjectNameKey: "subject_spanish"
    },
     {
      nameKey: "game_arts_gallery_of_time_name",
      descriptionKey: "game_arts_movements_desc",
      html: `<!DOCTYPE html><html><head><title>Galerie du Temps</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#831843}.dark h1{color:#f9a8d4}#description{font-style:italic;margin:20px 0;font-size:1.2em;background:#fce7f3;padding:15px;border-radius:10px;}.dark #description{background:rgba(131,24,67,0.2)}#options button{display:block;width:100%;padding:12px;margin:8px 0;font-size:1.1em;border:2px solid #f9a8d4;background:#fff1f2;border-radius:10px;}.dark #options button{background:rgba(131,24,67,0.1); border-color:#f472b6}.correct{background:#dcfce7 !important; border-color:#4ade80 !important;}.incorrect{background:#fee2e2 !important; border-color:#f87171 !important;}</style></head><body><div class="container"><h1>Galerie du Temps</h1><p>Quel mouvement artistique est décrit ?</p><div id="description"></div><div id="options"></div><p id="feedback" class="feedback"></p></div><script>const movements=[{desc:'Mouvement du début du 20e siècle qui décompose les objets en formes géométriques.',c:'Cubisme',o:['Surréalisme','Impressionnisme','Art Nouveau']},{desc:"Mouvement qui cherche à exprimer le fonctionnement réel de la pensée, en l'absence de tout contrôle exercé par la raison.",c:'Surréalisme',o:['Cubisme','Pointillisme','Réalisme']},{desc:"Style caractérisé par des touches de peinture visibles, l'accent sur la lumière et ses changements.",c:'Impressionnisme',o:['Baroque','Expressionnisme','Fauvisme']}];let current;function newQ(){current=movements[Math.floor(Math.random()*movements.length)];document.getElementById('description').textContent='"'+current.desc+'"';const opts=[...current.o,current.c].sort(()=>.5-Math.random());const optsEl=document.getElementById('options');optsEl.innerHTML='';opts.forEach(opt=>{const btn=document.createElement('button');btn.textContent=opt;btn.onclick=(e)=>check(opt,e.target);optsEl.appendChild(btn)});document.getElementById('feedback').textContent=''}function check(ans,btn){document.querySelectorAll('#options button').forEach(b=>b.disabled=true);const feedbackEl=document.getElementById('feedback');if(ans===current.c){feedbackEl.textContent='Correct !';feedbackEl.className='feedback correct';btn.classList.add('correct')}else{feedbackEl.textContent='Faux ! C\\\'était le '+current.c;feedbackEl.className='feedback incorrect';btn.classList.add('incorrect')}setTimeout(newQ,1500)}newQ();</script></body></html>`,
      subjectNameKey: "subject_arts"
    },
    { 
      nameKey: "game_arts_colorist_name",
      descriptionKey: "game_arts_color_mix_desc",
      html: `<!DOCTYPE html><html><head><title>Le Coloriste</title><meta name='viewport' content='width=device-width, initial-scale=1.0'>${GAME_STYLES}<style>h1{color:#8e44ad}.dark h1{color:#c084fc}#mix-zone{display:flex;justify-content:center;align-items:center;margin:20px 0;user-select:none}.color-circle{width:80px;height:80px;border-radius:50%;margin:0 10px;background:#eee;border:2px dashed #ccc}.dark .color-circle{background:#374151; border-color:#6b7280}.plus,.equals{font-size:2.5em;color:#333;margin:0 20px;}.dark .plus,.dark .equals{color:#d1d5db}#target-color{width:100px;height:100px;border-radius:50%;margin:0 auto;border:3px solid #ccc;}.dark #target-color{border-color:#6b7280}#options{display:flex;justify-content:center;gap:10px;margin-top:20px;}#options button{width:50px;height:50px;padding:0;border-radius:50%;cursor:grab;box-shadow:0 2px 5px rgba(0,0,0,0.2)}</style></head><body><div class="container"><h1>Le Coloriste</h1><p>Mélangez les couleurs primaires pour obtenir :</p><div id="target-color"></div><div id="mix-zone"><div id="c1" class="color-circle"></div><span class="plus">+</span><div id="c2" class="color-circle"></div></div><p>Glissez les couleurs ici</p><div id="options"></div></div><script>const colors={red:'#ff0000',yellow:'#ffff00',blue:'#0000ff'};const mixes=[{c1:'red',c2:'yellow',res:'orange'},{c1:'red',c2:'blue',res:'purple'},{c1:'yellow',c2:'blue',res:'green'}];let current,selections=[];function newQuestion(){current=mixes[Math.floor(Math.random()*mixes.length)];document.getElementById('target-color').style.background=current.res;document.getElementById('c1').style.background=document.documentElement.classList.contains('dark')?'#374151':'#eee';document.getElementById('c2').style.background=document.documentElement.classList.contains('dark')?'#374151':'#eee';selections=[];const optsEl=document.getElementById('options');optsEl.innerHTML='';Object.keys(colors).forEach(c=>{const btn=document.createElement('button');btn.dataset.color=c;btn.style.background=colors[c];btn.draggable=true;btn.addEventListener('dragstart',e=>e.dataTransfer.setData('color',c));optsEl.appendChild(btn)})}document.querySelectorAll('.color-circle').forEach((circle,index)=>{circle.addEventListener('dragover',e=>e.preventDefault());circle.addEventListener('drop',e=>{e.preventDefault();const color=e.dataTransfer.getData('color');circle.style.background=colors[color];selections[index]=color;if(selections.length==2&&selections[0]&&selections[1]){if((selections.includes(current.c1)&&selections.includes(current.c2)))alert('Correct!');else alert('Faux!');setTimeout(newQuestion,1000)}})});newQuestion();</script></body></html>`,
      subjectNameKey: "subject_arts"
    }
];

export const AVATAR_ICONS: Record<string, React.ReactElement<{ className?: string }>> = {
    'user': <svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>,
    'folder': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 7V5a2 2 0 0 1 2-2h5l2 2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9"/></svg>,
    'book': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>,
    'lightbulb': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18h6M10 22h4M12 2a5 5 0 0 1 5 5c0 2-2 4-2 4H9s-2-2-2-4a5 5 0 0 1 5-5z"/></svg>,
    'flask': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 3h6M12 3v7l-3 7h12l-3-7V3M6 17h16"/></svg>,
    'globe': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15 15 0 1 1 0 20 15 15 0 0 1 0-20"/></svg>,
    'graduation-cap': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c0 2 4 3 6 3s6-1 6-3v-5"/></svg>,
    'terminal': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 17l6-6-6-6M12 19h8"/></svg>,
    'brain': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2a5 5 0 0 0-5 5v1a5 5 0 0 0 10 0V7a5 5 0 0 0-5-5zM12 12a5 5 0 0 0-5 5v1a5 5 0 0 0 10 0v-1a5 5 0 0 0-5-5zM4 12a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1M20 12a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1"/></svg>,
    'atom': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="1"/><path d="M20.2 20.2c2.4-2.4 2.4-6.3 0-8.7s-6.3-2.4-8.7 0-2.4 6.3 0 8.7 6.3 2.4 8.7 0z"/><path d="M3.8 3.8c-2.4 2.4-2.4 6.3 0 8.7s6.3 2.4 8.7 0 2.4-6.3 0-8.7-6.3-2.4-8.7 0z"/></svg>,
    'dna': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 4c0 4 4 4 4 8s-4 4-4 8M20 4c0 4-4 4-4 8s4 4 4 8M8 8h8M8 16h8"/></svg>,
    'scroll': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M8 21h8a2 2 0 0 0 2-2v-2H6v2a2 2 0 0 0 2 2z"/><path d="M4 3h12a2 2 0 0 1 2 2v12H4V5a2 2 0 0 1 2-2zM16 3v18"/></svg>,
    'map': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 6v16l7-4 8 4 7-4V2l-7 4-8-4z"/><path d="M8 2v16M16 6v16"/></svg>,
    'palette': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><path d="M7 7c2-2 5-2 7 0M7 17c2 2 5 2 7 0"/></svg>,
    'music': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>,
    'chart-bar': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 3v18h18"/><path d="M7 12h4m-4 4h9m-9-8h2"/></svg>,
    'check': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="M20 6L9 17l-5-5"/></svg>,
    'pin': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>,
    'star': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>,
    'camera': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.776 48.776 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z" /><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z" /></svg>,
    'code-bracket': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" /></svg>,
    'heart': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>,
    'bolt': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>,
    'sun': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>,
    'rocket': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4.5 11.5L12 2l7.5 9.5-7.5 9.5zM12 22V2"/></svg>,
    'sparkles': <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 8 L19.25 5.25 L22 4 L19.25 2.75 L18 0 L16.75 2.75 L14 4 L16.75 5.25 Z M10 22 L11.25 19.25 L14 18 L11.25 16.75 L10 14 L8.75 16.75 L6 18 L8.75 19.25 Z M18 22 L16.75 19.25 L14 18 L16.75 16.75 L18 14 L19.25 16.75 L22 18 L19.25 19.25 Z M4 8 L2.75 5.25 L0 4 L2.75 2.75 L4 0 L5.25 2.75 L8 4 L5.25 5.25 Z"/></svg>,
    'cog': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.424.35.534.954.26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 0 1-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.437-.995l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.213-1.28Z" /><path strokeLinecap="round" strokeLinejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" /></svg>,
    'trophy': <svg fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" d="M16.5 18.75h-9a9.75 9.75 0 0 0 1.373-3.852A9.75 9.75 0 0 0 4.5 6.75c0-2.432 1.255-4.596 3.168-5.832A9.753 9.753 0 0 1 12 3c2.09 0 4.028.623 5.682 1.668C19.595 5.904 21 8.068 21 10.5c0 2.236-1.005 4.21-2.627 5.648A9.75 9.75 0 0 0 16.5 18.75z" /><path strokeLinecap="round" strokeLinejoin="round" d="M12 15v3.75m0 0h3.75m-3.75 0H8.25" /></svg>,
};
export const AVATAR_ICON_KEYS = Object.keys(AVATAR_ICONS);